%!PS-Adobe-2.0
%%Creator: dvipsk 5.58c Copyright 1986, 1994 Radical Eye Software
%%Title: /var/tmp/tape/doc/@21344.2.dvi
%%Pages: 48
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Bold Courier Times-Roman Courier-Oblique
%%EndComments
%DVIPSCommandLine: /import/tex-latex2e/bin/dvips
%+ /var/tmp/tape/doc/@21344.2.dvi -o /var/tmp/tape/doc/@21344.2.ps
%DVIPSParameters: dpi=300, compressed, comments removed
%DVIPSSource:  TeX output 1999.09.20:1557
%%BeginProcSet: texc.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300
(/var/tmp/tape/doc/@21344.2.dvi) @start /Fa 135[19 3[10
15 3[19 19 4[10 3[17 19 26[12 31[12 12 40[{}11 37.500000
/Times-Roman rf /Fb 135[36 1[36 40 24 28 32 1[40 36 40
60 20 1[24 20 2[24 32 40 32 40 36 11[52 48 40 4[52 68
48 56 36 28 56 56 44 48 52 52 48 52 12[36 36 36 36 2[18
46[{}41 72.000000 /Times-Bold rf /Fc 135[25 36 25 28
17 19 22 1[28 25 28 41 14 28 17 14 28 25 17 22 28 22
28 25 9[50 1[36 33 28 2[30 39 2[33 39 25 19 2[30 33 1[36
33 13[25 25 25 25 25 1[12 17 45[{}44 50.000000 /Times-Bold
rf /Fd 134[25 2[25 25 25 25 25 1[25 25 25 25 25 1[25
25 25 2[25 25 25 25 25 12[25 25 12[25 12[25 25 25 25
25 25 25 25 25 25 1[25 25 6[25 38[{}35 41.666668 /Courier-Oblique
rf /Fe 134[23 23 1[23 23 13 18 15 23 23 23 23 35 13 23
13 13 23 23 15 20 23 20 23 20 13[25 6[28 2[15 4[33 21[11
15 45[{.167 SlantFont}30 45.624989 /Times-Roman rf /Ff
4 106 df<EB01FE903807FF8090381E01E0903878007801E0131CD80180130648C77E00
06EC018048EC00C0A2481560481530A3481518A348150CA900601518A36C1530A36C1560
6C15C0A26CEC01806CEC03006C6C1306D800E0131C0178137890381E01E0903807FF80D9
01FEC7FC262B7DA02D>13 D<EA03C0EA0FF0EA1FF8EA3FFCEA7FFEA2B5FCA6EA7FFEA2EA
3FFCEA1FF8EA0FF0EA03C010127D9317>15 D<134013C0EA0180A3EA0300A31206A35AA2
5AA35AA35AA35AA21260A37EA37EA37EA27EA37EA3EA0180A3EA00C013400A2E7CA112>
104 D<12C0A21260A37EA37EA37EA27EA37EA3EA0180A3EA00C0A2EA0180A3EA0300A312
06A35AA25AA35AA35AA35AA20A2E7DA112>I E /Fg 133[20 23
23 33 23 23 13 18 15 23 23 23 23 35 13 23 13 13 23 23
15 20 23 20 23 20 15 2[15 1[15 1[33 33 43 1[33 28 25
30 1[25 33 33 40 28 33 18 15 33 33 25 28 33 30 30 33
1[20 1[26 1[13 13 23 23 23 23 23 23 23 23 23 23 13 11
15 11 1[23 15 15 15 2[23 2[15 33[{}76 45.624989 /Times-Roman
rf /Fh 130[25 1[25 25 25 25 25 25 25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 1[25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 1[25
25 25 25 25 25 25 25 25 25 25 1[25 25 25 25 25 25 25
25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 1[25
1[25 25 25 33[{}87 41.666668 /Courier rf /Fi 134[30 1[43
30 33 20 23 27 1[33 30 33 50 17 33 20 17 33 30 20 27
33 27 33 30 11[43 40 33 2[37 47 43 56 40 1[30 23 1[47
2[43 43 40 9[30 30 30 30 30 30 30 30 30 1[15 46[{}47
59.999973 /Times-Bold rf /Fj 136[62 43 48 29 33 38 2[43
48 1[24 2[24 48 43 5[43 11[62 57 7[57 1[43 33 7[62 6[29
58[{}20 86.416626 /Times-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 0 693 a Fj(Using)22 b(ILU)h(with)e(Java:)g(A)h(Tutorial)p
0 744 1950 17 v 0 2008 a Fi(Bill)14 b(Janssen)h Fh
(<janssen@parc.xerox.com>)0 2075 y Fi(Chris)g(Jacobi)f
Fh(<jacobi@parc.xerox.com>)0 2274 y Fg(Formatted)d(20)g(September)h
(1999.)0 2473 y(Copyright)208 2472 y(c)196 2473 y Ff(\015)g
Fg(1995)e(Xerox)h(Corporation)0 2536 y(All)f(Rights)h(Reserved.)p
0 2570 1950 9 v eop
%%Page: 1 2
1 1 bop 1927 -58 a Fg(1)0 183 y Fi(0.1)30 b(Introduction)62
320 y Fg(This)9 b(tutorial)f(will)g(show)h(how)g(to)g(use)g(the)g(ILU)h
(system)f(with)f(the)i(programming)f(language)g(Java,)h(both)e(as)i(a)g
(way)f(of)0 382 y(developing)h(software)i(libraries,)g(and)g(as)h(a)f
(way)g(of)h(building)d(distributed)g(systems.)j(In)g(an)f(extended)g
(example,)h(we'll)0 445 y(build)g(an)i(ILU)g(module)f(that)g
(implements)h(a)g(simple)f(four-function)f(calculator,)j(capable)f(of)f
(addition,)h(subtraction,)0 507 y(multiplication,)g(and)h(division.)24
b(It)17 b(will)e(signal)g(an)h(error)h(if)f(the)g(user)g(attempts)f(to)
h(divide)f(by)h(zero.)27 b(The)16 b(example)0 569 y(demonstrates)d(how)
h(to)g(specify)g(the)g(interface)h(for)f(the)g(module;)i(how)d(to)h
(implement)g(the)g(module)g(in)g(Java;)i(how)e(to)0 632
y(use)f(that)g(implementation)f(as)h(a)h(simple)f(library;)g(how)g(to)g
(provide)f(the)h(module)g(as)g(a)h(remote)g(service;)g(how)f(to)g
(write)0 694 y(a)j(client)f(of)g(that)g(remote)h(service;)i(and)d(how)g
(to)g(use)h(subtyping)d(to)i(extend)g(an)h(object)e(type)h(and)h
(provide)e(different)0 756 y(versions)f(of)h(a)g(module.)20
b(We'll)14 b(also)g(demonstrate)f(how)h(to)f(use)h(OMG)h(IDL)f(with)f
(ILU,)h(and)g(discuss)f(the)h(notion)e(of)0 818 y(network)e(garbage)i
(collection.)62 955 y(Each)e(of)h(the)f(programs)g(and)g(files)f
(referenced)i(in)f(this)f(tutorial)g(is)g(available)h(as)g(a)h
(complete)f(program)g(in)g(a)g(separate)0 1018 y(appendix)g(to)h(this)f
(document;)g(parts)h(of)g(programs)g(are)h(quoted)e(in)h(the)g(text)f
(of)h(the)g(tutorial.)62 1155 y(This)e(tutorial)g(is)h(more)g(complex)g
(then)g(a)g(hello)f(world)h(example.)h(We)f(will)f(bother)h(about)f
Fh(")p Fg(factory)p Fh(")h Fg(objects)f(which)0 1217
y(have)i(lots)f(to)h(do)g(with)f(good)g(design)g(but)h(would)f
(absolutely)f(not)h(be)i(necessary)f(for)g(a)h(calculator)e(to)h(be)g
(functional.)p eop
%%Page: 2 3
2 2 bop 1927 -58 a Fg(2)0 183 y Fi(0.2)30 b(Specifying)13
b(the)i(Interface)62 326 y Fg(Our)i(first)g(task)g(is)f(to)h(specify)g
(more)h(exactly)e(what)h(it)g(is)g(we're)h(trying)e(to)g(provide.)29
b(A)17 b(typical)g(four-function)0 388 y(calculator)9
b(lets)g(a)h(user)g(enter)g(a)g(value,)g(then)f(press)g(an)h(operation)
f(key,)h(either)f Fh(+)p Fg(,)i(-,)f(/,)h(or)e(*,)i(then)e(enter)h
(another)f(number,)0 451 y(then)k(press)h(=)f(to)h(actually)e(have)i
(the)g(operation)e(happen.)19 b(There's)14 b(usually)e(a)i(CLEAR)g
(button)f(to)g(press)g(to)h(reset)f(the)0 513 y(state)e(of)g(the)g
(calculator.)g(We)g(want)g(to)g(provide)f(something)g(like)g(that.)62
655 y(We'll)15 b(recast)g(this)f(a)h(bit)f(more)h(formally)g(as)g(the)f
Fe(interface)k Fg(of)d(our)f(module;)i(that)e(is,)i(the)f(way)f(the)h
(module)f(will)0 718 y(appear)i(to)g(clients)e(of)i(its)f
(functionality.)23 b(The)16 b(interface)g(typically)e(describes)h(a)h
(number)g(of)g(function)f(calls)g(which)0 780 y(can)h(be)f(made)h(into)
e(the)h(module,)h(listing)d(their)i(arguments)g(and)g(return)g(types,)h
(and)f(describing)e(their)i(effects.)24 b(ILU)0 842 y(uses)11
b Fe(object-oriented)16 b Fg(interfaces,)c(in)g(which)f(the)h
(functions)e(in)i(the)f(interface)i(are)f(grouped)f(into)g(sets,)h
(each)h(of)f(which)0 905 y(applies)e(to)h(an)g Fe(object)g(type)p
Fg(.)g(These)f(functions)g(are)i(called)f Fe(methods)p
Fg(.)62 1047 y(For)17 b(example,)g(we)f(can)h(think)d(of)i(the)g
(calculator)f(as)h(an)g(object)g(type,)h(with)e(several)h(methods:)j
(Add,)e(Subtract,)0 1110 y(Multiply,)12 b(Divide,)h(Clear,)i(etc.)j
(ILU)13 b(provides)f(a)h(standard)g(notation)e(to)i(write)f(this)g
(down)h(with,)g(called)g Fe(ISL)18 b Fg(\(which)0 1172
y(stands)12 b(for)h(``Interface)i(Specification)d(Language''\).)17
b(ISL)d(is)f(a)g(declarative)g(language)g(which)f(can)i(be)f(processed)
g(by)0 1234 y(computer)d(programs.)h(It)f(allows)g(you)f(to)h(define)g
(object)g(types)f(\(with)g(methods\),)i(other)e(non-object)g(types,)h
(exceptions,)0 1296 y(and)h(constants.)62 1439 y(The)g(interface)h(for)
f(our)g(calculator)g(would)f(be)h(written)f(in)h(ISL)g(as:)120
1582 y Fh(INTERFACE)24 b(Tutorial;)120 1681 y(EXCEPTION)g
(DivideByZero;)120 1781 y(TYPE)h(Calculator)f(=)g(OBJECT)170
1831 y(METHODS)220 1881 y(SetValue)g(\(v)h(:)f(REAL\),)220
1930 y(GetValue)g(\(\))h(:)f(REAL,)220 1980 y(Add)g(\(v)h(:)g(REAL\),)
220 2030 y(Subtract)f(\(v)h(:)f(REAL\),)220 2080 y(Multiply)g(\(v)h(:)f
(REAL\),)220 2130 y(Divide)g(\(v)h(:)g(REAL\))f(RAISES)g(DivideByZero)g
(END)170 2180 y(END;)62 2403 y Fg(This)14 b(defines)f(an)i(interface)f
Fh(Tutorial)p Fg(,)h(an)f(exception)f Fh(DivideByZero)p
Fg(,)i(and)f(an)g(object)g(type)g Fh(Calculator)p Fg(.)0
2465 y(Let's)d(consider)f(these)h(one)g(by)g(one.)62
2608 y(The)16 b(interface,)i Fh(Tutorial)p Fg(,)f(is)f(a)g(way)g(of)h
(grouping)d(a)j(number)f(of)g(type)g(and)f(exception)h(definitions.)24
b(This)15 b(is)0 2670 y(important)c(to)h(prevent)g(collisions)e
(between)i(names)h(defined)f(by)g(one)g(group)g(and)g(names)h(defined)f
(by)g(another)g(group.)p eop
%%Page: 3 4
3 3 bop 1927 -58 a Fg(3)0 183 y(For)13 b(example,)h(suppose)d(two)h
(different)h(people)f(had)g(defined)g(two)g(different)h(object)f
(types,)g(with)g(different)h(methods,)0 246 y(but)f(both)g(called)h
Fh(Calculator)p Fg(!)k(It)c(would)f(be)h(impossible)e(to)i(tell)f
(which)g(calculator)h(was)g(meant.)k(By)d(defining)d(the)0
308 y Fh(Calculator)f Fg(object)h(type)g(within)e(the)i(scope)g(of)g
(the)g Fh(Tutorial)g Fg(interface,)g(this)f(confusion)g(can)h(be)h
(avoided.)62 453 y(The)20 b(exception,)g Fh(DivideByZero)p
Fg(,)h(is)e(a)h(formal)g(name)g(for)g(a)g(particular)f(kind)f(of)i
(error,)i(division)17 b(by)i(zero.)0 515 y(Exceptions)f(in)g(ILU)i(can)
f(specify)g(an)h Fe(exception-value)d(type)p Fg(,)22
b(as)d(well,)i(which)e(means)h(that)e(real)i(errors)f(of)h(that)0
578 y(kind)e(have)h(a)g(value)f(of)h(the)g(exception-value)e(type)i
(associated)f(with)f(them.)35 b(This)18 b(allows)g(the)g(error)i(to)e
(contain)0 640 y(useful)12 b(information)f(about)h(why)g(it)g(might)f
(have)i(come)g(about.)i(However,)e Fh(DivideByZero)e
Fg(is)h(a)h(simple)f(exception,)0 702 y(and)23 b(has)h(no)f
(exception-value)f(type)h(defined.)48 b(We)23 b(should)f(note)h(that)g
(the)g(full)g(name)h(of)g(this)e(exception)h(is)0 764
y Fh(Tutorial.DivideByZero)p Fg(,)12 b(but)h(for)g(this)f(tutorial)g
(we'll)h(simply)f(call)h(our)g(exceptions)f(and)h(types)f(by)h(their)g
(short)0 827 y(name.)62 972 y(The)e(object)g(type,)g
Fh(Calculator)g Fg(\(again,)g(really)g Fh(Tutorial.Calculator)p
Fg(\),)f(is)h(a)h(set)f(of)g(six)f(methods.)h(Two)g(of)0
1034 y(those)e(methods,)g Fh(SetValue)g Fg(and)g Fh(GetValue)p
Fg(,)g(allow)g(us)g(to)g(enter)g(a)h(number)f(into)g(the)g(calculator)g
(object,)g(and)g(``read'')0 1097 y(the)14 b(number.)22
b(Note)14 b(that)g Fh(SetValue)g Fg(takes)g(a)h(single)e(argument,)j
Fe(v)p Fg(,)g(of)e(type)g Fh(REAL)p Fg(.)22 b Fh(REAL)14
b Fg(is)g(a)h(built-in)d(ISL)j(type,)0 1159 y(denoting)9
b(a)j(64-bit)d(floating)h(point)f(number.)j(Built-in)d(ISL)j(types)e
(are)i(things)d(like)h Fh(INTEGER)h Fg(\(32-bit)e(signed)h(integer\),)0
1221 y Fh(BYTE)h Fg(\(8-bit)g(unsigned)e(byte\),)i(and)h
Fh(CHARACTER)e Fg(\(16-bit)g(Unicode)h(character\).)i(Other)e(more)g
(complicated)g(types)f(are)0 1283 y(built)f(up)g(from)i(these)f(simple)
f(types)h(using)e(ISL)j Fe(type)e(constructors)p Fg(,)g(such)h(as)g
Fh(SEQUENCE)h(OF)p Fg(,)f Fh(RECORD)p Fg(,)h(or)f Fh(ARRAY)h(OF)p
Fg(.)62 1429 y(Note)19 b(also)f(that)h Fh(SetValue)f
Fg(does)h(not)f(return)h(a)g(value,)i(and)e(neither)g(do)f
Fh(Add)p Fg(,)k Fh(Subtract)p Fg(,)e Fh(Multiply)p Fg(,)h(or)0
1491 y Fh(Divide)p Fg(.)11 b(Rather,)g(when)f(you)g(want)g(to)f(see)i
(what)f(the)g(current)g(value)g(of)h(the)f(calculator)f(is,)i(you)e
(must)h(call)g Fh(GetValue)p Fg(,)0 1553 y(a)16 b(method)f(which)f(has)
i(no)f(arguments,)h(but)f(which)f(returns)h(a)h Fh(REAL)f
Fg(value,)h(which)f(is)g(the)g(value)g(of)h(the)f(calculator)0
1615 y(object.)c(This)f(is)h(an)g(arbitrary)g(decision)f(on)g(our)h
(part;)g(we)g(could)g(have)g(written)f(the)h(interface)g(differently,)g
(say)g(as)120 1761 y Fh(TYPE)25 b(NotOurCalculator)e(=)i(OBJECT)170
1811 y(METHODS)220 1860 y(SetValue)f(\(\))h(:)f(REAL,)220
1910 y(Add)g(\(v)h(:)g(REAL\))f(:)h(REAL,)220 1960 y(Subtract)f(\(v)h
(:)f(REAL\))h(:)g(REAL,)220 2010 y(Multiply)f(\(v)h(:)f(REAL\))h(:)g
(REAL,)220 2060 y(Divide)f(\(v)h(:)g(REAL\))f(:)h(REAL)f(RAISES)h
(DivideByZero)e(END)170 2109 y(END;)0 2338 y Fg(--)12
b(but)e(we)h(didn't.)62 2483 y(Our)17 b(list)f(of)h(methods)f(on)g
Fh(Calculator)h Fg(is)f(bracketed)h(by)f(the)h(two)f(keywords)g
Fh(METHODS)g Fg(and)h Fh(END)p Fg(,)i(and)d(the)0 2545
y(elements)e(are)h(separated)g(from)g(each)g(other)f(by)g(commas.)22
b(This)13 b(is)h(pretty)g(standard)f(in)h(ISL:)h(elements)f(of)g(a)h
(list)f(are)0 2608 y(separated)f(by)h(commas;)h(the)e(keyword)g
Fh(END)g Fg(is)g(used)g(when)g(an)h(explicit)e(list-end)g(marker)i(is)f
(needed)h(\(but)f(not)g(when)0 2670 y(it's)g(not)h(necessary,)h(as)f
(in)g(the)g(list)f(of)h(arguments)g(to)g(a)g(method\);)h(the)f(list)f
(often)h(begins)f(with)g(some)h(keyword,)h(like)p eop
%%Page: 4 5
4 4 bop 1927 -58 a Fg(4)0 183 y Fh(METHODS)p Fg(.)24
b(The)16 b Fe(raises)f(clause)j Fg(\(the)e(list)e(of)i(exceptions)e
(which)h(a)h(method)f(might)g(raise\))g(of)h(the)f(method)h
Fh(Divide)0 246 y Fg(provides)10 b(another)h(example)g(of)g(a)h(list,)e
(this)g(time)h(with)f(only)h(one)g(member,)h(introduced)e(by)h(the)g
(keyword)f Fh(RAISES)p Fg(.)62 386 y(Another)17 b(standard)f(feature)i
(of)f(ISL)h(is)f(separating)f(a)i(name,)i(like)d Fh(v)p
Fg(,)i(from)f(a)f(type,)i(like)e Fh(REAL)p Fg(,)i(with)d(a)i(colon)0
448 y(character.)12 b(For)g(example,)f(constants)f(are)i(defined)f
(with)f(syntax)g(like)120 589 y Fh(CONSTANT)24 b(Zero)h(:)g(INTEGER)f
(=)h(0;)0 808 y Fg(Definitions,)9 b(of)i(interface,)h(types,)f
(constants,)f(and)h(exceptions,)f(are)i(terminated)f(with)f(a)h
(semicolon.)62 949 y(We)i(should)e(expand)h(our)g(interface)h(a)g(bit)e
(by)h(adding)g(more)h(documentation)e(on)h(what)g(our)g(methods)g
(actually)f(do.)0 1011 y(We)i(can)f(do)g(this)f(with)h(the)g
Fe(docstring)g Fg(feature)h(of)g(ISL,)g(which)e(allows)g(the)h(user)h
(to)e(add)i(arbitrary)f(text)f(to)h(object)g(type)0 1074
y(definitions)d(and)i(method)g(definitions.)e(Using)h(this,)g(we)h(can)
h(write)120 1214 y Fh(INTERFACE)24 b(Tutorial;)120 1314
y(EXCEPTION)g(DivideByZero)170 1364 y("this)g(error)h(is)f(signalled)g
(if)h(the)g(client)f(of)h(the)g(Calculator)e(calls)120
1414 y(the)i(Divide)f(method)g(with)h(a)g(value)f(of)h(0";)120
1513 y(TYPE)g(Calculator)f(=)g(OBJECT)170 1563 y(COLLECTIBLE)170
1613 y(DOCUMENTATION)g("4-function)f(calculator")170
1663 y(METHODS)220 1712 y(SetValue)h(\(v)h(:)f(REAL\))h("Set)f(the)h
(value)f(of)h(the)g(calculator)f(to)g(`v'",)220 1762
y(GetValue)g(\(\))h(:)f(REAL)50 b("Return)24 b(the)h(value)f(of)h(the)f
(calculator",)220 1812 y(Add)g(\(v)h(:)g(REAL\))149 b("Adds)24
b(`v')h(to)g(the)f(calculator's)g(value",)220 1862 y(Subtract)g(\(v)h
(:)f(REAL\))h("Subtracts)f(`v')g(from)h(the)g(calculator's)e(value",)
220 1912 y(Multiply)h(\(v)h(:)f(REAL\))h("Multiplies)f(the)g
(calculator's)g(value)g(by)h(`v'",)220 1961 y(Divide)f(\(v)h(:)g
(REAL\))f(RAISES)g(DivideByZero)g(END)269 2011 y("Divides)h(the)f
(calculator's)g(value)g(by)h(`v'")170 2061 y(END;)0 2280
y Fg(Note)11 b(that)g(we)h(can)f(use)h(the)f Fh(DOCUMENTATION)f
Fg(keyword)h(on)g(object)g(types)g(to)g(add)g(documentation)f(about)h
(the)g(object)0 2342 y(type,)18 b(and)e(can)h(simply)e(add)i
(documentation)e(strings)g(to)h(the)g(end)h(of)f(exception)g(and)g
(method)g(definitions.)25 b(These)0 2405 y(docstrings)11
b(would)g(be)i(passed)f(on)g(to)g(the)g(lisp)g(docstring)f(system,)i
(so)f(that)g(they)g(are)h(available)f(at)h(runtime)f(from)h(lisp.)0
2467 y(Documentation)d(strings)f(cannot)i(currently)f(be)h(used)g(for)h
(non-object)d(types)i(or)g(from)h(Java.)62 2608 y(ILU)17
b(provides)f(a)h(program,)i Fh(islscan)p Fg(,)f(which)e(can)h(be)g
(used)f(to)h(check)g(the)g(syntax)e(of)i(an)g(ISL)g(specification.)0
2670 y Fh(islscan)11 b Fg(parses)g(the)g(specification)e(and)i
(summarizes)h(it)e(to)h(standard)f(output:)p eop
%%Page: 5 6
5 5 bop 1927 -58 a Fg(5)120 183 y Fh(\045)25 b Fd(islscan)f
(Tutorial.isl)120 233 y Fh(Interface)g("Tutorial",)g(imports)g("ilu")
170 283 y({defined)g(on)h(line)f(1)195 333 y(of)g(file)h
(/tmp/tutorial/Tutorial.isl)d(\(Fri)j(Jan)g(27)f(09:41:12)g(1995\)})120
432 y(Types:)170 482 y(real)572 b({<built-in>,)24 b(referenced)g(on)h
(10)f(11)h(12)g(13)g(14)f(15})120 582 y(Classes:)170
632 y(Calculator)422 b({defined)24 b(on)h(line)g(17})220
681 y(methods:)269 731 y(SetValue)g(\(v)f(:)h(real\);)647
b({defined)24 b(10,)h(id)g(1})319 781 y("Set)g(the)f(value)h(of)g(the)f
(calculator)g(to)h(`v'")269 831 y(GetValue)g(\(\))f(:)h(real;)672
b({defined)24 b(11,)h(id)g(2})319 881 y("Return)g(the)f(value)h(of)f
(the)h(calculator")269 930 y(Add)g(\(v)g(:)g(real\);)771
b({defined)24 b(12,)h(id)g(3})319 980 y("Adds)g(`v')f(to)h(the)g
(calculator's)e(value")269 1030 y(Subtract)i(\(v)f(:)h(real\);)647
b({defined)24 b(13,)h(id)g(4})319 1080 y("Subtracts)f(`v')h(from)f(the)
h(calculator's)f(value")269 1130 y(Multiply)h(\(v)f(:)h(real\);)647
b({defined)24 b(14,)h(id)g(5})319 1180 y("Multiplies)f(the)h
(calculator's)f(value)g(by)h(`v'")269 1229 y(Divide)g(\(v)g(:)f(real\))
h({DivideByZero};)322 b({defined)24 b(16,)h(id)g(6})319
1279 y("Divides)f(the)h(calculator's)f(value)g(by)h(`v'")220
1329 y(documentation:)269 1379 y("4-function)f(calculator")220
1429 y(unique)g(id:)50 b(ilu:cigqcW09P1FF98gYVOhf5XxGf15)120
1528 y(Exceptions:)170 1578 y(DivideByZero)372 b({defined)24
b(on)h(line)g(5,)f(refs)h(15})120 1628 y(\045)0 1840
y(islscan)7 b Fg(simply)g(lists)g(the)g(types)g(defined)h(in)f(the)h
(interface,)h(separating)d(out)i(object)f(types)g(\(which)g(it)g(calls)
h(``classes''\),)0 1902 y(the)k(exceptions,)g(and)g(the)g(constants.)h
(Note)f(that)f(for)i(the)f Fh(Calculator)f Fg(object)h(type,)g(it)g
(also)g(lists)f(something)f(called)0 1964 y(its)h Fe(unique)f(id)p
Fg(.)j(This)e(is)g(a)h(160-bit)e(number)i(\(expressed)f(in)h(base)f
(64\))h(that)f(ILU)h(assigns)e(automatically)g(to)i(every)f(type,)0
2026 y(as)j(a)g(way)g(of)g(distinguish)o(ing)d(them.)19
b(While)14 b(it)f(might)g(interesting)f(to)h(know)g(that)h(it)f(exists)
g(\(:-\),)i(the)e(ILU)h(user)g(never)0 2089 y(has)d(know)g(what)g(it)g
(is;)g Fh(islscan)g Fg(supplies)e(it)i(for)h(the)f(convenience)g(of)h
(the)f(ILU)g(implementors,)g(who)g(sometimes)h(do)0 2151
y(have)f(to)g(know)f(it.)p eop
%%Page: 6 7
6 6 bop 1927 -58 a Fg(6)0 183 y Fi(0.3)30 b(Implementing)13
b(the)i(True)g(Module)62 323 y Fg(After)d(we've)g(defined)g(an)g
(interface,)h(we)f(then)f(need)h(to)g(supply)e(an)i(implementation)e
(of)i(our)g(module.)i(Implemen-)0 385 y(tations)c(can)i(be)g(done)f(in)
g(any)h(language)f(supported)f(by)h(ILU.)h(Which)f(language)g(you)g
(choose)g(often)h(depends)e(on)i(what)0 448 y(sort)j(of)g(operations)f
(have)h(to)g(be)g(performed)h(in)f(implementing)f(the)g(specific)h
(functions)f(of)h(the)g(module.)23 b(Different)0 510
y(languages)11 b(have)h(specific)g(advantages)g(and)g(disadvantages)e
(in)i(different)g(areas.)j(Another)d(consideration)e(is)i(whether)0
572 y(you)i(wish)g(to)h(use)f(the)h(implementation)e(mainly)i(as)g(a)g
(library,)g(in)g(which)f(case)h(it)g(should)e(probably)h(be)h(done)f
(in)g(the)0 634 y(same)h(language)f(as)h(the)g(rest)f(of)h(your)f
(applications,)g(or)h(mainly)f(as)h(a)g(remote)h(service,)g(in)e(which)
g(case)h(the)g(specific)0 697 y(implementation)10 b(language)g(is)h
(less)f(important.)62 836 y(We'll)h(demonstrate)g(an)h(implementation)e
(of)h(the)g Fh(Calculator)g Fg(object)g(type)f(in)h(Java,)h(which)f(is)
g(one)g(of)g(the)h(most)0 899 y(capable)g(of)g(all)g(the)g
(ILU-supported)e(languages.)j(This)e(is)h(just)f(a)h(matter)h(of)f
(defining)f(a)h(Java)g(class,)g(corresponding)f(to)0
961 y(the)g Fh(Tutorial.Calculator)f Fg(type.)i(Before)h(we)e(do)h
(that,)f(though,)f(we'll)i(explain)e(how)h(the)g(names)h(and)g
(signatures)0 1023 y(of)f(the)g(Java)g(functions)f(are)i(arrived)f(at.)
0 1256 y Fc(0.3.1)26 b(What)14 b(the)g(Interface)h(Looks)g(Like)g(in)g
(Java)62 1396 y Fg(For)g(every)f(programming)g(language)f(supported)g
(by)h(ILU,)g(there)h(is)e(a)i(standard)e Fe(mapping)j
Fg(defined)d(from)i(ISL)g(to)0 1458 y(that)c(programming)h(language.)g
(This)f(mapping)g(defines)g(what)h(ISL)g(type)f(names,)i(exception)e
(names,)h(method)g(names,)0 1520 y(and)f(so)g(on)g(look)f(like)g(in)h
(that)g(programming)f(language.)62 1660 y(The)k(mapping)f(for)h(Java)f
(is)g(simple.)19 b(For)14 b(type)f(names,)i(such)e(as)h
Fh(Tutorial.Calculator)p Fg(,)f(the)g(Java)h(name)g(of)0
1722 y(the)e(ISL)g(type)f Fh(Interface.Name)g Fg(is)g
Fh(Interface.Name)p Fg(,)h(with)e(any)i(hyphens)f(replaced)h(by)f
(underscores.)i(That)e(is,)0 1784 y(the)f(name)h(of)g(the)f(interface)h
(in)f(ISL)h(becomes)g(the)f(name)h(of)g(a)g(class)f(in)g(Java.)h(So)g
(the)f(name)h(of)g(our)f Fh(Calculator)g Fg(type)0 1847
y(in)h(Java)g(would)f(be)h Fh(Tutorial.Calculator)p Fg(,)f(which)h(is)f
(really)h(the)g(name)h(of)f(a)h(Java)f(class.)62 1986
y(The)f(Java)f(mapping)g(for)h(a)f(method)g(name)i(such)e(as)g
Fh(SetValue)g Fg(is)g(the)g(method)g(name,)i(with)e(any)g(hyphens)f
(replaced)0 2049 y(by)j(underscores.)g(The)g(return)g(type)g(of)g(this)
f(Java)i(method)f(is)f(whatever)h(is)g(specified)g(in)g(the)g(ISL)g
(specification)f(for)h(the)0 2111 y(method,)k(or)f Fh(void)g
Fg(if)g(no)g(type)g(is)f(specified.)20 b(The)14 b(arguments)g(for)h
(the)e(Java)i(method)e(are)i(the)f(same)h(as)f(specified)g(in)0
2173 y(the)d(ISL;)h(their)f(types)g(are)h(the)f(Java)h(types)f
(corresponding)f(to)h(the)g(ISL)h(types.)g(An)f(instance)g(is)g(simply)
g(a)h(value)f(of)h(that)0 2235 y(type.)f(Thus)f(the)h(Java)g(method)g
(corresponding)e(to)i(our)g(ISL)h Fh(SetValue)e Fg(would)g(have)h(the)g
(prototype)f(signature)195 2375 y Fh(void)24 b(SetValue\(float)g(v\))h
(throws)f(org.omg.CORBA.SystemException)62 2670 y Fg(Similarly,)11
b(the)g(signatures)f(for)h(the)g(all)g(methods,)g(in)f(Java,)i(are)g
(encapsulated)e(in)h(this)f(generated)h(interface)p eop
%%Page: 7 8
7 7 bop 1927 -58 a Fg(7)120 183 y Fh(package)24 b(Tutorial;)120
283 y(public)g(interface)g(Calculator)g(extends)h
(org.omg.CORBA.Object{)170 333 y(public)f(void)h(SetValue\(double)e
(v\))220 382 y(throws)h(org.omg.CORBA.SystemException;)170
432 y(public)g(double)h(GetValue\(\))220 482 y(throws)f
(org.omg.CORBA.SystemException;)170 532 y(public)g(void)h(Add\(double)f
(v\))220 582 y(throws)g(org.omg.CORBA.SystemException;)170
632 y(public)g(void)h(Subtract\(double)e(v\))220 681
y(throws)h(org.omg.CORBA.SystemException;)170 731 y(public)g(void)h
(Multiply\(double)e(v\))220 781 y(throws)h
(org.omg.CORBA.SystemException;)170 831 y(public)g(void)h
(Divide\(double)e(v\))220 881 y(throws)h(DivideByZero,)g
(org.omg.CORBA.SystemException;)120 930 y(})h(//Calculator)0
1142 y Fg(Note)15 b(that)h(we)g(don't)f(always)g(want)h(to)f(generate)h
(code)g(in)g(a)g(package)g(name)g(derived)g(directly)f(from)h(the)g
(interface)0 1204 y(name.)c(The)f(stubber)f(allows)g(to)h(specify)g(a)g
(prefix)g(package.)62 1341 y(Note)17 b(that)f(even)i(though)d(most)i
(methods)f(do)h(not)f(raise)h(an)h(exception,)f(we)h(still)d(dedclare)i
(the)g(system)g(excep-)0 1404 y(tions.)37 b(The)20 b(mapping)f(of)h
(exception)f(names)h(is)g(similar)f(to)h(the)g(mapping)f(used)h(for)g
(types.)37 b(So)20 b(the)g(exception)0 1466 y Fh(Tutorial.DivideByZero)
9 b Fg(would)h(also)h(have)g(the)g(name)h Fh(Tutorial.DivideByZero)p
Fg(,)e(in)g(Java.)62 1603 y(One)h(way)f(to)h(see)g(what)f(all)g(the)h
(Java)f(names)h(for)g(an)g(interface)g(look)f(like)g(is)g(to)g(run)g
(the)h(program)g Fh(java-stubber)p Fg(.)0 1665 y(This)k(program)h
(reads)g(an)g(ISL)g(file,)h(and)f(generates)f(the)h(necessary)g(Java)g
(code)f(to)h(support)e(that)h(interface)h(in)g(Java.)0
1727 y(One)d(of)f(the)h(files)f(generated)g(is)g(`)p
Fe(Interface)p Fh(.java)p Fg(',)i(which)e(contains)g(the)g(definitions)
e(of)j(all)f(the)h(Java)f(types)g(for)h(that)0 1790 y(interface.)120
1927 y Fh(\045)25 b Fd(java-stubber)f(Tutorial.isl)120
1977 y Fh(writing)g(file)h(javastubs/Tutorial/DivideByZero.java)120
2026 y(writing)f(file)h(javastubs/Tutorial/Factory.java)120
2076 y(writing)f(file)h(javastubs/Tutorial/FactoryStub.java)120
2126 y(writing)f(file)h(javastubs/Tutorial/Calculator.java)120
2176 y(writing)f(file)h(javastubs/Tutorial/CalculatorStub.ja)o(va)120
2226 y(\045)p eop
%%Page: 8 9
8 8 bop 1927 -58 a Fg(8)0 183 y Fc(0.3.2)26 b(Building)13
b(the)i(Implementation)62 320 y Fg(Now)g(we)h(provide)f(an)g
(implementation)f(of)i(our)f(object;)i(the)e(CalculatorImpl)g(class)g
Fe(implement)20 b Fg(the)15 b(generated)0 382 y(Java)c(interface)g(for)
h(our)f Fh(Calculator)f Fg(class:)120 519 y Fh(package)24
b(Tutorial;)120 619 y(/*)145 669 y(*)h(While)f(this)h(class)f(complies)
g(to)h(the)g(Tutorial.isl)e(specification)145 719 y(*)i(it)f(is)h(a)g
(local)f(implementation.)49 b(Its)24 b(instances)h(need)f(to)h(be)145
769 y(*)g(registered)f(explicitely)g(or)g(implicitely)g(with)h(Ilu)f
(before)h(they)145 818 y(*)g(are)f(publicly)h(accessible.)145
868 y(*/)120 968 y(public)f(class)h(CalculatorImpl)419
1018 y(extends)f(xerox.ilu.IluObjectBase)419 1067 y(implements)g
(Tutorial.Calculator)f({)220 1117 y(double)h(theValue)g(=)h(0.0;)220
1167 y(public)f(CalculatorImpl\(\){)319 1217 y(theValue)g(=)h(0.0;)220
1267 y(})220 1316 y(public)f(void)h(SetValue\(double)e(v\))i({)319
1366 y(theValue)f(=)h(v;)220 1416 y(})220 1466 y(public)f(double)g
(GetValue\(\))g({)319 1516 y(return)h(theValue;)220 1566
y(})220 1615 y(public)f(void)h(Add\(double)e(v\))i({)319
1665 y(theValue)f(=)h(theValue)f(+)h(v;)220 1715 y(})220
1765 y(public)f(void)h(Subtract\(double)e(v\))i({)319
1815 y(theValue)f(=)h(theValue)f(-)h(v;)220 1864 y(})220
1914 y(public)f(void)h(Multiply\(double)e(v\))i({)319
1964 y(theValue)f(=)h(theValue)f(*)h(v;)220 2014 y(})220
2064 y(public)f(void)h(Divide\(double)e(v\))i(throws)f
(Tutorial.DivideByZero)f({)319 2114 y(if)i(\(v==0.0\))f(throw)h(new)f
(Tutorial.DivideByZero\(\);)319 2163 y(theValue)g(=)h(theValue)f(/)h
(v;)220 2213 y(})120 2263 y(})g(//CalculatorImpl)62 2475
y Fg(Each)16 b(instance)e(of)i(a)f Fh(Tutorial.CalculatorImpl)f
Fg(implements)h(a)g Fh(Tutorial.Calculator)p Fg(.)23
b(Each)15 b(has)0 2537 y(an)21 b(instance)e(variable)i(called)f
Fh(theValue)p Fg(,)i(which)e(maintains)g(a)h(running)e(total)g(of)i
(the)f(`accumulator')h(for)g(that)0 2599 y(instance.)32
b(We)18 b(can)h(create)g(an)f(instance)f(of)i(a)f Fh
(Tutorial.CalculatorImpl)f Fg(object)g(by)h(simply)f(calling)g
Fh(new)0 2661 y(Tutorial.CalculatorImpl\(\))p Fg(.)p
eop
%%Page: 9 10
9 9 bop 1927 -58 a Fg(9)62 183 y(So,)12 b(a)g(very)f(simple)f(program)i
(to)e(use)h(the)g Fh(Tutorial)g Fg(module)g(might)f(be)h(the)g
(following:)120 360 y Fh(/*)145 410 y(*)25 b(A)g(simple)f(client)g
(program)g(that)h(demonstrates)f(the)g(use)h(of)g(the)145
459 y(*)g(Calculator)f(module)g(as)h(a)g(library.)145
509 y(*/)120 609 y(/*)145 659 y(*)g(Run)f(this)h(like)145
708 y(*)g(java)f(Tutorial.simple1)g(number)g([number...])145
758 y(*/)120 858 y(package)g(Tutorial;)120 957 y(public)g(class)h
(simple1)f({)220 1057 y(public)g(static)g(void)h(main\(String)f
(argv[]\))g({)319 1107 y(CalculatorImpl)g(calc;)319 1157
y(//create)g(the)h(calculator)319 1207 y(calc)g(=)g(new)f
(CalculatorImpl\(\);)319 1256 y(if)h(\(calc==null\))f({)419
1306 y(System.err.println\("Got)f(null)h(TapeCalculator"\);)419
1356 y(System.exit\(1\);)319 1406 y(})319 1456 y(//clear)h(the)f
(calculator)g(before)g(using)h(it)319 1505 y(calc.SetValue\(0.0\);)319
1555 y(//now)g(loop)f(over)h(the)f(arguments,)g(adding)h(each)f(in)h
(turn)319 1605 y(int)g(i)g(=)g(0;)319 1655 y(while)g(\(i<argv.length\))
e({)419 1705 y(Double)h(v)h(=)g(Double.valueOf\(argv[i]\);)e(//don't)h
(bother)g(about)h(exceptions)419 1754 y(calc.Add\(v.doubleValue\(\)\);)
419 1804 y(i)g(=)g(i+1;)319 1854 y(})319 1904 y(//and)g(print)f(the)h
(result)319 1954 y(System.out.println\("The)e(sum)i(is)f(")h(+)g
(calc.GetValue\(\)\);)220 2004 y(})f(//main)120 2103
y(})h(//simple1)0 2394 y Fg(This)10 b(program)i(would)e(be)h(compiled)f
(and)h(then)g(run)g(as)g(follows:)120 2570 y Fh(\045)25
b Fd(java)f(Tutorial.simple1)g(34.9)g(45.23111)g(12)120
2620 y Fh(the)h(sum)f(is)h(92.13111)120 2670 y(\045)p
eop
%%Page: 10 11
10 10 bop 1905 -58 a Fg(10)0 183 y(This)10 b(is)h(a)g(completely)f
(self-contained)g(use)h(of)g(the)g Fh(Tutorial)f Fg(implementation;)g
(when)g(a)i(method)f(is)f(called,)h(it)g(is)f(the)0 246
y(true)h(method)f(that)h(is)f(invoked.)g(The)h(use)g(of)g(ILU)g(in)g
(this)f(program)h(adds)f(some)h(overhead)g(in)g(terms)g(of)g(included)f
(code,)0 308 y(but)g(has)h(almost)g(the)g(same)h(performance)g(as)f(a)g
(version)g(of)g(this)f(program)h(that)g(does)g(not)f(use)h(ILU.)0
517 y Fc(0.3.3)26 b(Using)14 b(ILU)i(generated)f(interfaces)62
654 y Fg(Lets)c(do)g(this)f(little)f(change:)i(instead)f(of)319
791 y Fh(CalculatorImpl)24 b(calc;)319 841 y(calc)h(=)g(new)f
(CalculatorImpl\(\);)62 1053 y Fg(we)12 b(will)e(write)319
1190 y Fh(Tutorial.Calculator)23 b(calc;)319 1240 y(calc)i(=)g(new)f
(CalculatorImpl\(\);)62 1452 y Fg(This)16 b(obvously)e(doesn't)h(cause)
i(any)f(real)h(change)f(but)g(conceptionally)e(the)i(change)h(is)f
(quite)f(large:)21 b(calc)c(isn't)0 1514 y(simply)10
b(a)i(local)e(class)h(anymore)h(but)e(now)h(is)f(the)h(java)g
(interface)h(representing)e(the)h(ILU)g(object.)0 1723
y Fc(0.3.4)26 b(Checking)14 b(for)g(Exceptions)62 1860
y Fg(Suppose,)f(instead)e(of)i(the)f Fh(Add)g Fg(method,)h(we'd)g
(called)f(the)g Fh(Divide)g Fg(method.)j(In)e(that)f(case,)h(we)g
(might)f(have)g(had)0 1923 y(to)g Fe(handle)h Fg(a)g
Fh(DivideByZero)e Fg(exception;)g(that)g(is,)h(notice)f(the)h
(exception)f(and)h(do)f(something)g(sensible.)h(We)h(do)e(this)0
1985 y(by)g(establishing)d(a)k(handler)f(for)g(the)g(exception:)319
2122 y Fh(...)319 2172 y(try)25 b({)419 2222 y(//now)f(loop)h(over)f
(the)h(arguments,)f(adding)g(each)h(in)g(turn)419 2271
y(int)g(i)f(=)h(1;)419 2321 y(while)f(\(i<argv.length\))g({)519
2371 y(Double)g(v)h(=)f(Double.valueOf\(argv[i]\);)f(//don't)h
(bother...)519 2421 y(calc.Divide\(v.doubleValue\(\)\);)519
2471 y(i)g(=)h(i+1;)419 2521 y(})319 2570 y(})g(catch)g
(\(Tutorial.DivideByZero)d(e\))j({)419 2620 y
(System.err.println\("raised)d(DivideByZero)i(exception:)g(")h(+)g
(e\);)319 2670 y(})p eop
%%Page: 11 12
11 11 bop 1905 -58 a Fg(11)0 183 y(And)11 b(here's)g(an)g(example)h(of)
f(what)g(we)g(get)g(when)g(it)f(runs:)120 320 y Fh(\045)25
b Fd(java)f(Tutorial.simple2)g(12345)g(6)h(7)g(8)g(9)120
370 y Fh(the)g(sum)f(is)h(4.08234126984)120 420 y(\045)g
Fd(java)f(simple2.py)g(12345)h(6)g(0)f(8)h(9)120 470
y Fh(exception)f(signalled:)49 b(Tutorial:)24 b(DivideByZero)62
681 y Fg(Actually,)14 b(every)f(method)h(may)g(return)f(an)h
(exception,)f(as)h(there)g(are)g(a)g(number)g(of)g(standard)e(system)i
(exceptions)0 744 y(which)g(may)g(be)h(signalled)d(even)i(by)g(methods)
g(which)f(have)h(no)g(declared)h(exceptions.)k(So)c(we)f(should)f
(check)h(every)0 806 y(method)d(to)f(see)i(if)f(it)g(succeeded,)g(even)
g(simple)g(ones)g(like)f Fh(GetValue)p Fg(.)p eop
%%Page: 12 13
12 12 bop 1905 -58 a Fg(12)0 183 y Fi(0.4)30 b(Providing)13
b(the)i(True)f(Module)h(as)h(a)f(Network)f(Service)62
320 y Fg(Now)e(let's)g(see)g(what's)g(involved)e(in)i(providing)e(the)i
(calculator)g(functionality)e(as)i(a)g(network)g(service.)i(Basically,)
0 382 y(there)d(are)h(three)f(things)f(to)h(look)f(at:)37
519 y Ff(\017)30 b Fg(providing)9 b(a)j(``factory'')f(to)g(build)f
(calculator)g(objects;)37 594 y Ff(\017)30 b Fg(publishing)8
b(the)j(name)h(of)f(the)g(factory;)g(and)37 669 y Ff(\017)30
b Fg(writing)10 b(a)h(server)h(program.)0 876 y Fc(0.4.1)26
b(Using)14 b(Factories)i(to)f(Build)f(Objects)62 1013
y Fg(When)c(one)g(program)g(uses)f(code)h(from)h(another)e(address)g
(space,)i(it)f(has)f(to)h(get)f(its)g(hands)h(on)f(an)h(instance)f(of)h
(an)g(ILU)0 1076 y(object,)h(to)g(be)h(able)f(to)g(call)g(methods.)h
(In)f(our)g(library)g(application,)f(we)i(simply)e(made)i(a)g(call)f
(into)g(the)g(true)g(module,)h(to)0 1138 y(create)i(an)f(instance)g(of)
g(the)g(calculator)g(object.)k(In)c(the)g(networked)f(world,)h(we)h
(need)f(to)g(do)g(the)g(same)h(kind)e(of)h(thing,)0 1200
y(but)f(this)g(time)h(the)g(call)f(into)g(the)h(true)g(module)f(has)h
(to)g(be)g(a)g(method)f(on)h(an)g(object)f(type.)17 b(In)c(short,)g(we)
g(need)g(to)f(have)0 1263 y(some)f(object)g(type)f(which)h(exports)f(a)
i(method)e(something)g(like)170 1400 y Fh(CreateCalculator)23
b(\(\))i(:)g(Calculator)62 1611 y Fg(There)16 b(are)g(several)g(ways)f
(to)h(provide)e(this.)24 b(The)16 b(standard)f(way)g(of)h(doing)e(it)h
(is)h(to)f(add)g(an)h(object)f(type)g(to)g(our)0 1673
y Fh(Tutorial)f Fg(interface,)h(which)e(contains)g(this)g(method.)20
b(This)14 b(kind)f(of)h(object)f(type)h(is)g(sometimes)f(called)h(a)h
Fe(factory)p Fg(,)0 1736 y(because)9 b(it)f(exists)g(only)g(in)g(order)
h(to)f(build)g(instances)f(of)i(other)g(object)f(types.)h(We'll)g(add)g
(the)f(following)f(type)h(definition)0 1798 y(to)j(our)g(`)p
Fh(Tutorial.isl)p Fg(':)120 1935 y Fh(TYPE)25 b(Factory)f(=)h(OBJECT)
170 1985 y(METHODS)220 2035 y(CreateCalculator)e(\(\))i(:)g(Calculator)
170 2084 y(END;)62 2296 y Fg(Then)19 b(we)h(need)f(to)g(provide)f(an)i
(implementation)d(of)j(the)f Fh(Factory)g Fg(object)f(type,)k(just)c
(as)h(we)h(did)e(with)g(the)0 2358 y Fh(Calculator)10
b Fg(type:)p eop
%%Page: 13 14
13 13 bop 1905 -58 a Fg(13)120 183 y Fh(//we)25 b(will)f(be)h(lazy)f
(and)h(not)g(make)f(an)h(extra)f(file)120 233 y(class)g(FactoryImpl)319
283 y(extends)h(xerox.ilu.IluObjectBase)319 333 y(implements)f
(Tutorial.Factory)49 b({)220 382 y(xerox.ilu.IluServer)23
b(server;)220 432 y(public)h(FactoryImpl\(xerox.ilu.IluServer)e
(server\))i({)319 482 y(this.server)g(=)h(server;)220
532 y(})220 582 y(public)f(Tutorial.Calculator)f(CreateCalculator\(\))
344 632 y(throws)i(org.omg.CORBA.SystemException)220
681 y({)319 731 y(Tutorial.Calculator)e(calc)i(=)g(new)f
(Tutorial.CalculatorImpl\(\);)319 781 y
(xerox.ilu.Ilu.registerTrueObject\()419 831 y
(xerox.ilu.Ilu.inventID\(\),)419 881 y(calc,)419 930
y(this.server,)419 980 y(Tutorial.CalculatorStub.iluClass\(\),)419
1030 y(xerox.ilu.Ilu.unspec)419 1080 y(\);)319 1130 y(return)h(calc;)
220 1180 y(})120 1229 y(})g(//FactoryImpl)0 1441 y Fg(Now,)13
b(to)g(provide)f(other)h(programs)g(a)g(way)g(of)g(creating)g
(calculator)f(objects,)h(we'll)g(just)e(create)j(just)e(one)h(instance)
f(of)0 1503 y Fh(Tutorial.Factory)p Fg(,)e(and)g(let)g(programs)g(call)
g(the)g Fh(CreateCalculator)f Fg(method)h(on)g(that)g(at)g(will,)g(to)g
(obtain)f(new)0 1566 y(calculator)i(objects.)62 1703
y(Little)d(remark:)i(Using)e(factories)g(is)g(one)h(way)f(of)h(taking)e
(care)j(of)f(the)f(start)g(up)h(and)f(scaling)g(issues)f(of)i(an)g
(application.)0 1765 y(It)i(is)g(also)g(a)h(means)g(to)f(make)h(this)e
(tutorial)g(example)h(somewhat)g(less)g(trivial)f(then)h(a)h(hello)e
(world)h(program.)h(However)0 1827 y(you)f(can)g(write)g(applications)e
(and)i(use)g(Ilu)g(without)e(using)h(this)g(factory)h(scheme.)0
2022 y Fc(0.4.2)26 b(Publishing)14 b(a)h(Well-Known)e(Instance)62
2159 y Fg(The)e(question)e(then)h(arises,)g(how)g(does)g(a)h(program)g
(that)f(wants)g(to)g(use)g(the)h Fh(Factory)f Fg(object)g(get)g(its)g
(hands)g(on)g(that)0 2222 y(one)j(well-known)f(instance?)k(The)e
(answer)f(is)g(to)f(use)h(the)g Fe(simple)g(binding)h
Fg(system)e(built)g(into)g(ILU.)i(Simple)f(binding)0
2284 y(allows)d(a)h(program)g(acting)f(as)h(a)g(``server'')h(to)e
Fe(publish)j Fg(the)e(location)e(of)i(a)g(well-known)e(object,)i(and)g
(allows)e(programs)0 2346 y(acting)h(as)i(``clients'')e(of)h(that)g
(server)g(to)g(look)f(up)h(the)g(location,)f(given)h(the)g(object's)f
(name.)62 2483 y(The)16 b(name)h(of)f(an)h(ILU)f(object)f(instance)h
(has)g(two)f(parts,)i(which)f(are)h(the)f Fe(instance)f(handle)j
Fg(of)e(the)g(object,)h(and)0 2545 y(the)12 b(name)i(of)f(its)f
Fe(kernel)g(server)p Fg(,)i(called)e(the)h Fe(server)g(ID)p
Fg(.)g(\(The)g(kernel)f(server)h(is)f(a)i(data)e(structure)g
(maintained)g(by)g(the)0 2608 y(ILU)g(kernel)f(which)g(takes)h(care)g
(of)g(all)g(communication)e(between)i(different)f(address)h(spaces.\))h
(These)f(two)f(combined)0 2670 y(must)g(form)h(a)f(universally)f
(unique)g(ID)h(for)h(the)f(object.)g(Usually)f(you)h(can)g(simply)f
(let)h(the)g(ILU)g(system)g(choose)g(names)p eop
%%Page: 14 15
14 14 bop 1905 -58 a Fg(14)0 183 y(for)13 b(your)g(objects)f
(automatically,)h(in)f(which)h(case)g(it)g(takes)g(care)h(to)e(choose)h
(names)g(which)g(will)f(never)h(conflict)f(with)0 246
y(names)g(in)g(use)f(by)h(others.)h(However,)f(for)g(objects)f(which)g
(we)i(wish)e(to)g(publish,)g(we)h(need)g(to)f(specify)g(what)h(the)g
(name)0 308 y(of)f(an)g(object)g(will)f(be,)i(so)e(that)h(users)g(of)g
(the)g(well-known)e(object)i(can)g(find)g(it.)62 446
y(When)h(working)f(with)h(the)g(Java)g(programming)g(language,)g(this)f
(act)h(of)h(explicitly)d(specifying)h(an)h(object)g(name)h(is)0
508 y(divided)f(into)g(two)h(steps.)18 b(First,)c(we)f(create)h(a)g
(kernel)f(server)h(with)e(a)i(specified)f(server)h(ID.)g(Secondly,)f
(we)h(create)g(an)0 570 y(instance)e(of)h(an)g(object)g(on)f(this)g
(new)h(server,)h(with)e(a)i(specified)e(instance)g(handle.)k(Together,)
d(the)g(server)g(ID)h(and)e(the)0 633 y(instance)e(handle)h(form)h(the)
e(name)i(of)g(the)e(instance.)62 771 y(For)25 b(instance,)i(we)d(might)
g(use)f(a)i(server)f(ID)h(of)f Fh(Tutorial.)p Fe(domain)s
Fg(,)i(where)f Fe(domain)h Fg(is)e(your)g(Internet)0
833 y(domain)14 b(\(typically)f(something)f(like)i Fe(department)p
Fh(.)p Fe(company)p Fh(.com)p Fg(,)g(or)h Fe(department)p
Fh(.)p Fe(univerity)p Fh(.edu)p Fg(\).)j(This)13 b(serves)0
895 y(to)i(distinguis)o(h)d(your)j(server)g(from)g(other)g(servers)g
(on)f(the)h(net.)23 b(Then)14 b(we)h(can)h(use)e(a)i(simple)e(instance)
g(handle,)i(like)0 957 y Fh(theFactory)p Fg(.)25 b(The)15
b(name,)j(or)e Fe(object)f(ID)p Fg(,)i(of)f(this)e(object)h(would)g
(then)g(be)h Fh(theFactory@Tutorial.)p Fe(domain)s Fg(,)0
1020 y(where)11 b Fe(domain)j Fg(would)c(vary)h(from)g(place)g(to)g
(place.)h(Note)e(that)h(this)f(implies)g(that)g(only)g(one)h(instance)f
(of)h(this)f(object)h(is)0 1082 y(going)g(to)g(exist)g(in)g(the)h
(whole)f(domain.)i(If)f(you)f(have)h(many)g(people)f(using)g(different)
g(versions)g(of)h(this)e(object)h(in)h(your)0 1144 y(domain,)e(you)e
(should)g(introduce)g(more)i(qualifiers)e(in)h(the)g(server)g(ID)h(so)f
(that)f(your)h(kernel)g(server)h(can)f(be)h(distinguis)o(hed)0
1206 y(from)i(that)e(run)h(by)g(others.)0 1423 y Fc(0.4.3)26
b(The)15 b(Server)g(Program)62 1561 y Fg(Given)c(this)f(information,)g
(we)h(can)h(now)e(write)h(a)h(complete)f(program)g(that)f(will)g(serve)
i(as)f(a)g(provider)g(of)g(calculator)0 1623 y(objects)h(to)h(other)g
(programs.)18 b(It)13 b(will)f(create)i(a)g(single)e
Fh(Factory)h Fg(instance)f(with)g(a)i(well-known)e(name,)i(publish)e
(that)0 1685 y(instance,)f(then)f(hang)h(out)f(servicing)g(methods)h
(invoked)f(on)h(its)f(objects.)g(Here's)i(what)f(it)f(looks)g(like:)120
1823 y Fh(package)24 b(Tutorial;)120 1923 y(import)g
(Tutorial.CalculatorImpl;)120 1973 y(import)g(Tutorial.DivideByZero;)
120 2072 y(//insert)g(the)h(factory)f(code)h(from)f(above)h(here...)120
2172 y(public)f(class)h(TutorialServer)e({)220 2222 y(static)h
(FactoryImpl)g(factory;)220 2271 y(static)g(xerox.ilu.IluServer)f
(trueServer;)220 2321 y(public)h(static)g(void)h(main\(String)f
(argv[]\))g({)319 2371 y(try)h({)419 2421 y(String)f(serverId;)419
2471 y(if)h(\(argv.length)e(<)i(1\))g({)543 2521 y
(System.out.println\("Must)e(specify)h(a)h(server)f(id"\);)543
2570 y(return;)419 2620 y(})419 2670 y(//Create)g(a)h(server)f(with)h
(appropriate)f(server)g(id)h(\(which)f(is)p eop
%%Page: 15 16
15 15 bop 1905 -58 a Fg(15)419 183 y Fh(//taken)24 b(from)h(the)f
(first)h(argument\))419 233 y(serverId)f(=)h(argv[0];)419
283 y(trueServer)f(=)h(xerox.ilu.IluServer.createServer\(s)o
(erverId\);)419 333 y(//Now)f(create)h(an)f(instance)h(of)f(a)h
(Factory)f(object)h(on)f(the)h(server)419 382 y(//with)f(an)h(instance)
f(handle)g("theFactory")419 432 y(factory)g(=)h(new)g
(FactoryImpl\(trueServer\);)419 482 y
(xerox.ilu.Ilu.registerTrueObject\()519 532 y("theFactory",)519
582 y(factory,)519 632 y(trueServer,)519 681 y
(Tutorial.FactoryStub.iluClass\(\),)519 731 y(xerox.ilu.Ilu.remember)
519 781 y(\);)419 831 y(//Make)f(the)h(factory)f(well)h(known)f(by)h
(publishing)f(it)419 881 y(xerox.ilu.IluSimpleBinding.publish\(fa)o
(ctory\);)419 930 y(//Now)g(we)h(print)f(the)h(string)f(binding)h
(handle)f(\(the)h(object's)f(name)419 980 y(//plus)g(its)h(location\))f
(of)h(the)f(new)h(Factory)f(instance)419 1030 y
(System.out.println\("Factory)e(instance)i(published"\);)419
1080 y(System.out.println\("Its)f(SBH)h(is)h('")g(+)g
(xerox.ilu.Ilu.sbhOfObject\(factory)o(\))120 1130 y(+)g("'"\);)419
1180 y(//the)f(program)h(doesn't)f(terminate)g(because)g(the)h(server)f
(is)h(still)f(alive...)319 1229 y(})h(catch)g
(\(org.omg.CORBA.SystemException)d(e\))i({)419 1279 y
(System.out.println\("IluException:)e(")j(+)f(e\);)319
1329 y(})220 1379 y(})120 1429 y(})h(//TutorialServer)62
1640 y Fg(When)11 b(we)h(run)e(this)h(program,)g(we'll)g(see)g
(something)f(like:)120 1777 y Fh(\045)25 b Fd(java)f
(Tutorial.TutorialServer)f(Tutorial.)p Fe(dept.company.com)k
Fd(&)120 1827 y Fh(Factory)d(instance)g(published.)120
1877 y(Its)h(SBH)f(is)h('theFactory@Tutorial.)p Fe(dept.company.com)s
Fh(@)p Fe(somegibberish)t Fh('.)120 1927 y(\045)0 2138
y Fg(This)11 b(indicates)h(that)f(the)h(object)g(known)f(as)i
Fh(theFactory@Tutorial.)p Fe(dept.company.com)h Fg(is)d(being)h
(exported)g(in)0 2201 y(a)j(particular)f(way,)h(which)f(is)g(encoded)g
(in)g(the)g Fe(somegibberish)j Fg(part)e(of)f(the)g(string)f(binding)g
(handle.)21 b(Your)14 b(specific)0 2263 y(numbers)d(will)f(vary,)h(but)
g(it)g(should)e(look)h(similar.)p eop
%%Page: 16 17
16 16 bop 1905 -58 a Fg(16)0 183 y Fi(0.5)30 b(Using)15
b(the)g(Network)f(Service)62 327 y Fg(Given)20 b(that)f(someone)h(has)g
(exported)f(a)h(module)g(as)g(a)h(network)e(service,)j(by)e(publishing)
d(the)j(location)f(of)h(a)0 389 y(well-known)9 b(instance)h(of)i(an)f
(object)f(type,)h(a)g(potential)e(client)i(of)g(that)f(module)h(can)g
(then)f(use)h(the)g(module)f(by)h(binding)0 452 y(to)e(that)g
(well-known)f(instance.)i(It)g(does)f(this)f(by)h(calling)g(the)g
(standard)g(ILU)h(routine)e Fh(ilu.LookupObject\(\))p
Fg(,)h(which)0 514 y(takes)h(the)h(name)g(and)g(type)f(of)h(an)g
(instance,)f(and)h(attempts)f(to)g(find)g(that)h(instance)e(on)i(the)f
(net.)h(The)g(name)h(of)e(the)h(object)0 576 y(is)i(specified)g(as)h(a)
g(pair)f(of)h(strings,)f(the)g Fe(server)h(ID)j Fg(of)d(the)g(object's)
e Fe(kernel)i(server)p Fg(,)h(and)e(the)g Fe(instance)g(handle)j
Fg(of)d(the)0 639 y(object)d(on)h(that)g(kernel)g(server.)62
783 y(So,)i(in)f(our)g(first)g(example,)h(we)f(could)g(replace)g(the)g
(call)h(to)e Fh(Create_Tutorial_Calculator)f Fg(with)i(a)g(routine)0
845 y(that)k(calls)g Fh(xerox.ilu.IluSimpleBinding.lookup\(\))e
Fg(to)j(find)f(the)g(factory,)j(then)d(creates)h(an)g(instance)f(of)0
907 y(a)j Fh(Calculator)p Fg(.)35 b(The)19 b(full)f(code)h(of)g(the)g
(revised)g(example,)i(`)p Fh(simple3.java)p Fg(',)g(is)d(available)h
(as)g Ff(h)p Fg(undefined)p Ff(i)0 969 y Fg([simple3.java],)11
b(page)g Ff(h)p Fg(undefined)p Ff(i)p Fg(,)e(but)h(here's)h(what)f(the)
h(new)g(code)f(for)h(obtaining)e(an)i(instance)f(of)h(a)g
Fh(Calculator)0 1032 y Fg(looks)f(like:)220 1176 y Fh(/*)24
b(We)h(define)f(a)h(new)g(routine,)f("Get_Tutorial_Calculator",)e
(which)245 1225 y(*)i(finds)h(the)f(tutorial)h(factory,)f(then)g
(creates)h(a)f(new)h(Calculator)245 1275 y(*)f(object)h(for)f(us.)245
1325 y(*/)220 1375 y(public)g(static)g(Tutorial.Calculator)220
1425 y(GetTutorialCalculator\(String)e(serverId,)i(String)g
(factoryId\))g({)319 1474 y(Tutorial.Factory)g(factory)g(=)h(null;)319
1524 y(Tutorial.Calculator)e(calc)i(=)g(null;)319 1574
y(System.out.println\("Looking)e(up)h(factory"\);)319
1624 y(try)h({)419 1674 y(/*)g(We)f(have)h(to)g(call)f(lookupObject)g
(with)g(the)h(object)f(ID)h(of)444 1724 y(*)g(the)f(factory)g(object,)h
(and)f(the)h(``type'')f(of)h(the)f(object)h(we're)f(looking)444
1773 y(*)h(for.)444 1823 y(*/)419 1873 y(factory)f(=)h
(\(Tutorial.Factory\))444 1923 y(xerox.ilu.IluSimpleBinding.lookup\()
444 1973 y(serverId,)444 2022 y(factoryId,)444 2072 y
(Tutorial.FactoryStub.iluClass\(\))444 2122 y(\);)319
2172 y(})g(catch)g(\(org.omg.CORBA.SystemException)d(e\))i({)419
2222 y(System.err.println\("Failed)e(to)j(get)g(factory:)f(")h(+)f
(e\);)419 2271 y(System.exit\(1\);)319 2321 y(})319 2371
y(if)h(\(factory==null\))e({)419 2421 y(System.err.println\("Got)g
(null)h(factory"\);)419 2471 y(System.exit\(1\);)319
2521 y(})319 2570 y(System.out.println\("Got)f(factory)h(")h(+)g
(factory\);)319 2620 y(System.out.println\("Looking)e(up)h
(Calculator"\);)319 2670 y(try)h({)p eop
%%Page: 17 18
17 17 bop 1905 -58 a Fg(17)419 183 y Fh(calc)24 b(=)h
(factory.CreateCalculator\(\);)319 233 y(})g(catch)g
(\(org.omg.CORBA.SystemException)d(e\))i({)419 283 y
(System.err.println\("Failed)e(to)j(get)g(Calculator:)f(")g(+)h(e\);)
419 333 y(System.exit\(1\);)319 382 y(})319 432 y(if)g(\(calc==null\))f
({)419 482 y(System.err.println\("Got)f(null)h(Calculator"\);)419
532 y(System.exit\(1\);)319 582 y(})319 632 y(System.out.println\("Got)
f(Calculator)h(")h(+)g(calc\);)319 681 y(return)g(calc;)220
731 y(})f(//GetTutorialCalculator)62 943 y Fg(We)12 b(then)e(can)i(use)
f(the)g Fh(simple3)f Fg(program:)120 1080 y Fh(\045)25
b Fd(java)f(Tutorial.simple3)g(Tutorial.)p Fe(dept.company.com)j
Fd(theFactory)d(1)h(2)g(3)g(4)f(5)h(6)120 1130 y Fh(the)g(sum)f(is)h
(2.10000)120 1180 y(\045)p eop
%%Page: 18 19
18 18 bop 1905 -58 a Fg(18)0 183 y Fi(0.6)30 b(Subtyping)15
b(and)h(Other)e(ISL)h(Types)62 327 y Fg(ILU)f(ISL)h(contains)e(support)
f(for)j(a)f(number)g(of)g(types)g(other)f(than)h(object)f(types)h(and)g
Fh(REAL)p Fg(.)20 b(The)14 b(primitive)f(ISL)0 389 y(types)d(include)f
(16,)i(32,)g(and)f(64)g(bit)g(signed)g(and)g(unsigned)f(integers,)h
(bytes,)g(8)h(and)f(16)g(bit)g(characters,)i(a)f(boolean)e(type,)0
451 y(and)14 b(32,)g(64,)g(and)g(128)f(bit)g(floating)f(point)h(types.)
18 b(A)c(number)g(of)f(type)h(constructors)e(allow)h(specification)f
(of)i(arrays,)0 514 y(sequences,)d(records,)h(unions,)e(and)h
(enumerations,)g(as)g(well)g(as)g(object)g(types.)g(The)g(ISL)h
Fh(OPTIONAL)f Fg(type)g(constructor)0 576 y(provides)i(an)h(implicit)e
(union)h(of)h(some)g(type)f(with)g Fh(NULL)p Fg(,)i(which)e(is)g
(useful)g(for)h(building)e(recursive)h(data)h(structures)0
638 y(such)d(as)g(linked)f(lists)g(or)h(binary)f(trees.)62
782 y(To)17 b(illustrate)e(some)i(of)f(these)h(types,)g(we'll)f(extend)
h(the)f Fh(Tutorial.Calculator)f Fg(type.)28 b(Many)17
b(real-world)0 844 y(desktop)11 b(calculators)h(include)f(a)i
Fe(register)f(tape)p Fg(,)h(a)g(printed)e(listing)g(of)h(all)g(the)g
(operations)g(that)f(have)i(been)f(performed,)0 906 y(with)j(a)g
(display)g(of)g(what)g(the)h(value)f(of)g(the)h(calculator)f(was)g
(after)h(each)g(operation.)24 b(We'll)15 b(add)g(a)h(register)f(tape)h
(to)0 968 y Fh(Tutorial.Calculator)p Fg(.)62 1112 y(We)d(could)f(do)g
(it)h(by)f(adding)g(a)h(new)f(method)g(to)h Fh(Tutorial.Calculator)p
Fg(,)f(called)g Fh(GetTape)p Fg(.)k(Unfortunately,)0
1174 y(this)g(would)g(break)h(our)g(existing)f(code,)j(because)e(it)f
(would)g(change)h(the)g Fh(Tutorial.Calculator)f Fg(object)g(type,)0
1237 y(and)d(existing)e(compiled)h(clients)g(wouldn't)f(be)i(able)g(to)
f(recognize)h(the)g(new)f(object)g(type.)17 b(Instead,)c(we'll)f
(extend)g(the)0 1299 y(object)g(type)h(by)g Fe(subtyping)r
Fg(;)e(that)h(is,)i(by)e(creating)h(a)g(new)g(object)g(type)f(which)h
(uses)f Fh(Tutorial.Calculator)g Fg(as)h(a)0 1361 y Fe(supertype)p
Fg(,)g(but)f(adds)h(new)g(methods)f(of)h(its)f(own.)17
b(This)12 b(subtype)f(will)h(actually)g(have)h(two)g(types;)g(both)f
(its)g(own)g(new)0 1423 y(type,)f(and)f Fh(Tutorial.Calculator)p
Fg(.)g(We'll)g(also)g(define)g(a)h(subtype)e(of)i(the)f
Fh(Tutorial.Factory)f Fg(type,)i(to)f(allow)0 1486 y(us)j(to)f(create)i
(new)e(instances)g(of)h(the)g(new)g Fh(Calculator)f Fg(subtype.)j
(Finally,)e(we'll)g(define)f(a)i(new)f(module)f(interface)0
1548 y(for)f(the)g(new)g(types,)g(so)g(that)f(we)i(don't)e(have)h(to)g
(modify)g(the)g Fh(Tutorial)f Fg(interface.)62 1691 y(First,)h(let's)g
(define)g(the)g(necessary)g(type)g(to)f(represent)h(the)g(operations)f
(performed)i(on)e(the)h(calculator:)120 1835 y Fh(INTERFACE)24
b(Tutorial2)g(IMPORTS)g(Tutorial)h(END;)120 1935 y(TYPE)g(OpType)f(=)h
(ENUMERATION)220 1984 y(SetValue,)f(Add,)g(Subtract,)g(Multiply,)g
(Divide)h(END;)120 2084 y(TYPE)g(Operation)f(=)g(RECORD)220
2134 y(op)g(:)h(OpType,)220 2184 y(value)f(:)h(REAL,)220
2233 y(accumulator)f(:)g(REAL)170 2283 y(END;)120 2383
y(TYPE)h(RegisterTape)e(=)i(SEQUENCE)f(OF)h(Operation;)62
2608 y Fg(The)13 b(enumerated)g(type)f Fh(OpType)g Fg(defines)g(an)h
(abstract)f(type)g(with)g(five)g(possible)f(values.)k(The)e(type)f
Fh(Operation)0 2670 y Fg(defines)j(a)h(record)g(type)f(\(in)h(Java,)h
(a)f(dictionary\))e(with)h(3)h(fields:)j(the)c Fe(op)j
Fg(field,)e(which)f(tells)g(us)g(which)g(of)h(the)f(five)p
eop
%%Page: 19 20
19 19 bop 1905 -58 a Fg(19)0 183 y(possible)9 b(calculator)g
(operations)g(was)i(performed,)g(the)f Fe(value)j Fg(field,)d(which)g
(tells)f(us)h(the)g(value)g(of)h(the)f(operand)g(for)g(the)0
246 y(operation,)h(and)g(the)g Fe(accumulator)k Fg(field,)d(which)f
(tells)f(us)h(what)g(the)h(value)f(of)g(the)h(calculator)f(was)g(after)
h(the)f(operation)0 308 y(had)i(been)f(performed.)17
b(Finally,)c(the)f Fh(Operation)h Fg(type)f(is)g(a)h(simple)f
(sequence,)i(or)f(list,)f(of)h Fh(Operation)p Fg(.)i(Note)e(that)0
370 y Fh(Tutorial2)c Fe(import)t Fg(s)g Fh(Tutorial)p
Fg(;)g(that)g(is,)h(it)f(allows)g(the)g(use)h(of)f(the)h
Fh(Tutorial)f Fg(types,)g(exceptions,)g(and)g(constants,)0
432 y(in)i(the)g(specifications)e(in)i Fh(Tutorial2)p
Fg(.)62 569 y(Now)g(we)g(define)g(the)g(new)g(object)g(types)f(\(in)h
(the)g(same)h(file\):)120 706 y Fh(TYPE)25 b(TapeCalculator)e(=)i
(OBJECT)f(COLLECTIBLE)170 756 y(SUPERTYPES)g(Tutorial.Calculator)f(END)
170 806 y(DOCUMENTATION)h("4)g(function)g(calculator)g(with)h(register)
f(tape")170 856 y(METHODS)220 906 y(GetTape)g(\(\))h(:)f(RegisterTape)
170 955 y(END;)120 1055 y(TYPE)h(Factory)f(=)h(OBJECT)f(SUPERTYPES)g
(Tutorial.Factory)f(END)170 1105 y(METHODS)220 1155 y
(CreateTapeCalculator)g(\(\))h(:)h(TapeCalculator)170
1204 y(END;)0 1416 y Fg(The)c Fh(SUPERTYPES)g Fg(attribute)e(of)j(an)f
(object)g(type)f(may)i(take)f(multiple)f(object)g(type)h(names,)k(so)20
b(ISL)i(supports)0 1478 y(multiple)e(inheritance.)40
b(The)21 b Fh(Tutorial2.TapeCalculator)e Fg(type)h(will)g(now)g
(support)g(the)h(six)f(methods)g(of)0 1541 y Fh(Tutorial.Calculator)p
Fg(,)10 b(as)h(well)g(as)g(its)f(own)h(method,)g Fh(GetTape)p
Fg(.)62 1678 y(We)g(then)f(need)h(to)f(provide)g(an)h(implementation)e
(for)i Fh(Tutorial2.TapeCalculator)d Fg(\(We)k(will)d(be)i(lazy)g
(again)0 1740 y(and)e(put)g(the)g(actual)h(code)f(in)g(the)h(file)f
(with)f(the)i(server\).)h(We)f(modify)f(each)h(method)f(on)g(the)g
Fh(TapeCalculator)g Fg(object)0 1802 y(to)i(record)g(its)f(invocation,)
g(and)h(add)g(a)h(slot)e(to)g(hold)h(the)g(contents)e(of)j(the)f
(`tape'.)p eop
%%Page: 20 21
20 20 bop 1905 -58 a Fg(20)62 183 y(We)12 b(also)e(provide)h(an)g
(implementation)f(for)h Fh(Tutorial2.Factory)p Fg(:)120
320 y Fh(//)25 b(lazy)f(again...)g(this)h(is)g(in)f(other)h(file)120
420 y(class)f(Factory2Impl)419 470 y(extends)g(xerox.ilu.IluObjectBase)
419 519 y(implements)g(Tutorial2.Factory)f({)220 619
y(public)h(Factory2Impl\(\))g({)220 669 y(})220 769 y(public)g
(Tutorial.Calculator)f(CreateCalculator\(\))344 818 y(throws)i
(org.omg.CORBA.SystemException)d({)319 868 y
(System.out.println\("Factory2Impl:)g(request)i(for)h(a)g(simple)f
(calculator"\);)319 918 y(return)h(new)f
(Tutorial2.TapeCalculatorImpl\(\);)220 968 y(})g(//CreateCalculator)220
1067 y(public)g(Tutorial2.TapeCalculator)f(CreateTapeCalculator\(\))120
1117 y(throws)h(org.omg.CORBA.SystemException)f({)319
1167 y(System.out.println\("Factory2Impl:)f(request)i(for)h(a)g(tape)f
(calculator"\);)319 1217 y(return)h(new)f
(Tutorial2.TapeCalculatorImpl\(\);)220 1267 y(})g
(//CreateTapeCalculator)120 1366 y(})h(//Factory2Impl)0
1578 y Fg(Note)7 b(that)g(both)g(t)o(he)g Fh(Tutorial)o(2.FactoryI)o
(mpl.CreateC)o(alculator)f Fg(and)h Fh(Tutor)o(ial2.Factor)o
(yImpl.Crea)o(teTapeCalcu)o(lator)0 1640 y Fg(methods)k(create)g(and)h
(return)f(instances)f(of)h Fh(Tutorial2.TapeCalculator)p
Fg(.)f(This)g(is)h(valid,)g(because)g(instances)f(of)0
1703 y Fh(Tutorial2.TapeCalculator)f Fg(are)j(also)f(instances)f(of)h
Fh(Tutorial.Calculator)p Fg(.)62 1840 y(Now)25 b(we)f(modify)h(`)p
Fh(TutorialServer.java)p Fg(')e(to)h(create)i(an)f(instance)f(of)g
Fh(Tutorial2.Factory)p Fg(,)k(in-)0 1902 y(stead)17 b(of)g
Fh(Tutorial.Factory)p Fg(,)h(and)f(to)g(initialize)e(the)i
Fh(Tutorial2)g Fg(true-side)f(code)h(\(See)h Ff(h)p Fg(undefined)p
Ff(i)e Fg([Tuto-)0 1964 y(rial2Server.java],)c(page)f
Ff(h)p Fg(undefined)p Ff(i)f Fg(for)h(the)g(actual)g(code\).)62
2101 y(Finally,)32 b(see)d Ff(h)p Fg(undefined)p Ff(i)d
Fg([simple4.java],)33 b(page)28 b Ff(h)p Fg(undefined)p
Ff(i)p Fg(,)j(for)e(an)f(example)h(of)f(a)h(client)e(of)h(the)0
2163 y Fh(TapeCalculator)10 b Fg(type.)62 2300 y(Note)h(that)f(one)g
(nice)h(result)f(of)h(this)e(approach)i(to)f(versioning)f(is)h(that)h
(old)f(clients,)g(which)g(know)g(nothing)f(about)g(the)0
2363 y(new)g Fh(TapeCalculator)f Fg(class,)h(or)h(about)e(the)h(whole)f
Fh(Tutorial2)h Fg(interface)g(in)g(general,)h(will)e(continue)f(to)i
(function,)0 2425 y(since)15 b(every)g(instance)f(of)h
Fh(Tutorial2.TapeCalculator)f Fg(is)g(also)h(an)g(instance)f(of)h
Fh(Tutorial.Calculator)p Fg(,)0 2487 y(and)c(every)g(instance)g(of)g
Fh(Tutorial2.Factory)f Fg(is)g(also)h(an)g(instance)g(of)g
Fh(Tutorial.Factory)p Fg(.)p eop
%%Page: 21 22
21 21 bop 1905 -58 a Fg(21)0 183 y Fi(0.7)30 b(Using)15
b(OMG)f(IDL)i(with)f(ILU)62 328 y Fg(ILU)22 b(also)e(supports)g(the)h
(use)g(of)h(the)f(interface)g(definition)f(language)g(OMG)i(IDL,)g
(defined)f(by)g(the)g(Object)0 390 y(Management)g(Group)f(\(OMG\))h
(for)g(their)f(Common)h(Object)f(Request)h(Broker)g(Architecture)f
(\(CORBA\).)i(OMG)0 452 y(IDL)17 b(uses)g(a)h(C)p Fh(++)p
Fg(-like)f(syntax,)i(so)e(it)g(may)h(be)g(easier)f(for)h(Java)f(and)h
(C)p Fh(++)g Fg(programmers)g(to)f(use)g(than)g(ILU)g(ISL.)0
515 y(Unfortunately,)8 b(CORBA)h(doesn't)f(include)g(some)h(of)g(the)f
(concepts)g(in)g(ILU,)h(such)g(as)f(garbage)h(collection)f(for)g
(transient)0 577 y(objects,)k(or)h Fh(OPTIONAL)f Fg(types,)g(so)g(not)g
(every)h(ILU)f(interface)h(can)g(be)f(expressed)g(in)g(OMG)h(IDL,)g
(but)f(many)h(of)f(them)0 639 y(can.)g(For)f(example,)h(here)g(is)e
(the)h(OMG)h(IDL)f(version)f(of)h(the)g Fh(Tutorial)g
Fg(interface:)120 784 y Fh(module)24 b(Tutorial)h({)170
883 y(exception)f(DivideByZero)g({};)170 983 y(interface)g(Calculator)g
({)220 1033 y(//)g(Set)h(the)g(value)f(of)h(the)f(calculator)g(to)h
(`v')220 1083 y(void)f(SetValue)g(\(in)h(double)f(v\);)220
1133 y(//)g(Return)h(the)f(value)h(of)f(the)h(calculator)220
1182 y(double)f(GetValue)g(\(\);)220 1232 y(//)g(Adds)h(`v')g(to)f(the)
h(calculator's)f(value)220 1282 y(void)g(Add)h(\(in)f(double)h(v\);)220
1332 y(//)f(Subtracts)g(`v')h(from)g(the)f(calculator's)g(value)220
1382 y(void)g(Subtract)g(\(in)h(double)f(v\);)220 1431
y(//)g(Multiplies)g(the)h(calculator's)f(value)g(by)h(`v')220
1481 y(void)f(Multiply)g(\(in)h(double)f(v\);)220 1531
y(//)g(Divides)h(the)f(calculator's)g(value)g(by)h(`v')220
1581 y(void)f(Divide)h(\(in)f(double)g(v\))h(raises)g
(\(DivideByZero\);)170 1631 y(};)170 1730 y(interface)f(Factory)g({)220
1780 y(//)g(Create)h(and)f(return)h(an)f(instance)h(of)f(a)h
(Calculator)f(object)220 1830 y(Calculator)g(CreateCalculator\(\);)170
1880 y(};)120 1930 y(};)62 2157 y Fg(WARNING:)14 b(The)g(IDL)g(version)
f(and)h(the)f(ISL)i(version)e(have)h(subtle)f(differences)h
(\(explained)f(later\).)20 b(To)14 b(avoid)0 2219 y(type)c(conflicts)g
(it)g(is)g(essential)g(that)g(the)h(client)f(and)h(the)f(server)h(in)g
(the)f(examples)h(either)f(are)i(both)e(build)f(using)h(the)g(IDL)0
2281 y(version)g(or)h(both)g(using)e(the)i(ISL)h(versions.)62
2426 y(This)e(can)i(be)f(used)g(with)f(the)h Fh(java-stubber)p
Fg(:)120 2570 y Fh(\045)25 b Fd(java-stubber)f(Tutorial.idl)120
2620 y Fh(writing)g(file)h(javastubs/Tutorial/DivideByZero.java)120
2670 y(writing)f(file)h(javastubs/Tutorial/Factory.java)p
eop
%%Page: 22 23
22 22 bop 1905 -58 a Fg(22)120 183 y Fh(writing)24 b(file)h
(javastubs/Tutorial/FactoryStub.java)120 233 y(writing)f(file)h
(javastubs/Tutorial/Calculator.java)120 283 y(writing)f(file)h
(javastubs/Tutorial/CalculatorStub.ja)o(va)120 333 y(\045)62
585 y Fg(This)14 b(will)f(be)i(a)g(bit)f(slower)g(than)g(running)f(the)
h Fh(java-stubber)g Fg(on)g(the)g(equivalent)g(ISL)g(file,)i(as)f(the)f
(program)0 647 y(works)9 b(by)h(converting)f(the)h(OMG)g(IDL)g(into)f
(ISL,)i(then)e(compiling)g(from)h(the)g(ISL)h(description.)e(OMG)h(IDL)
g(interfaces)0 709 y(can)h(be)h(checked)f(by)g(running)f(the)g(OMG)i
(IDL-to-ILU)e(ISL)i(converter,)f Fh(idl2isl)p Fg(,)g(directly:)120
866 y Fh(\045)25 b Fd(idl2isl)f(Tutorial.idl)120 916
y Fh(INTERFACE)g(Tutorial;)120 1016 y(EXCEPTION)g(DivideByZero;)120
1065 y(TYPE)h(Calculator)f(=)g(OBJECT)h(OPTIONAL)319
1115 y(METHODS)519 1165 y(SetValue)f(\(v)g(:)h(REAL\),)519
1215 y(GetValue)f(\(\))g(:)h(REAL,)519 1265 y(Add)f(\(v)h(:)g(REAL\),)
519 1315 y(Subtract)f(\(v)g(:)h(REAL\),)519 1364 y(Multiply)f(\(v)g(:)h
(REAL\),)519 1414 y(Divide)f(\(v)h(:)f(REAL\))718 1464
y(RAISES)g(DivideByZero)g(END)319 1514 y(END;)120 1564
y(TYPE)h(Factory)f(=)h(OBJECT)f(OPTIONAL)319 1613 y(METHODS)519
1663 y(CreateCalculator)f(\(\))i(:)f(Calculator)319 1713
y(END;)120 1763 y(\045)62 2015 y Fg(You)14 b(will)g(notice)f(that)h
(the)h(ISL)f(interface)h(generated)g(by)f Fh(idl2isl)g
Fg(is)g(a)h(bit)e(different,)j(in)e(that)g(the)g(object)g(type)0
2077 y(modifier)h Fh(OPTIONAL)g Fg(is)g(used)g(in)g(the)g(description)f
(of)h(the)g Fh(Calculator)g Fg(and)g Fh(Factory)g Fg(types.)24
b(This)14 b(is)h(because)0 2139 y(CORBA)g(has)e(the)h(notion)e(that)i
(any)g(object)f(type)g(instance)g(passed)h(as)g(a)g(parameter)h(or)f
(return)f(value)h(\(or)g(field)g(in)f(an)0 2202 y(array,)h(or)f
(element)h(of)f(a)g(sequence,)h(etc.\))j(may)d(be)f Fh(null)p
Fg(,)g(instead)f(of)i(being)e(a)h(valid)f(instance)h(pointer.)j(Thus,)d
(when)0 2264 y(working)d(with)h(OMG)g(IDL)h(descriptions)d(of)j(your)f
(interfaces,)h(it)f(is)g(necessary)g(to)g(check)h(the)f(return)g(type)g
(of)h(methods)0 2326 y(like)17 b Fh(Tutorial.Factory.CreateCalculator)e
Fg(to)i(see)h(that)g(a)g(valid)f(object)g(reference)i(has)e(been)h
(returned,)0 2388 y(before)g(using)f(the)h(object.)32
b(ISL)19 b(allows)e(you)g(to)h(have)g(these)g(CORBA-style)g(objects,)h
(by)f(using)f(the)h Fh(OPTIONAL)0 2451 y Fg(modifier)d(in)f(the)g
(declaration)g(of)h(an)g(object)f(type,)h(but)g(it)f(also)g(allows)g
(object)g(pointers)f(which)h(can't)h(be)g Fh(null)p Fg(.)22
b(By)0 2513 y(default)11 b(ILU)g(object)f(instances)g(may)i(not)e(be)h
Fh(null)p Fg(.)62 2670 y(The)g(OMG)h(IDL)f(version)f(of)h
Fh(Tutorial2)g Fg(can)g(be)g(found)g(in)g Ff(h)p Fg(undefined)p
Ff(i)e Fg([Tutorial2.idl],)h(page)h Ff(h)p Fg(undefined)p
Ff(i)p Fg(.)p eop
%%Page: 23 24
23 23 bop 1905 -58 a Fg(23)0 183 y Fi(0.8)30 b(Transient)14
b(and)h(Permanent)f(Objects)62 320 y Fg(Keen-eyed)h(readers)f(will)g
(have)g(seen)g(that)g(the)g Fh(Calculator)g Fg(type)g(in)g(`)p
Fh(Tutorial.isl)p Fg(')f(is)h(marked)h(with)e(the)0 382
y(modifier)g Fh(COLLECTIBLE)p Fg(,)g(while)f(the)g Fh(Factory)h
Fg(type)f(is)h(not.)j(ILU)c(differentiates)g(between)h(two)f(kinds)g
(of)h(objects,)0 445 y(which)d(we)i(call)f Fe(transient)j
Fg(and)d Fe(permanent)p Fg(.)62 582 y(Transient)17 b(objects)g(are)h
(typically)e(created)i(for)g(a)h(specific)e(use,)j(and)d(typically)f
(have)i(a)g(fixed)g(lifetime.)31 b(They)0 644 y(often)12
b(have)g(state)f(associated)h(with)f(them.)j(They)e(are)h(frequently)e
(used)g(to)h(represent)g(some)g(ongoing)f(computation)f(or)0
706 y(operation.)62 843 y(Permanent)17 b(objects)f(are)h(usually)e
(expected)i(to)f(be)h(around)f(forever)h(\(or)f(until)g(some)g
(activity)f(not)h(captured)h(by)0 906 y(a)h(programming)g(concept)f
(terminates\).)32 b(Permanent)18 b(objects)f(are)i(often)e(gateways)g
(to)h(some)g(sort)f(of)h(service,)i(or)0 968 y(represent)13
b(some)f(external)h(piece)g(of)f(data,)i(such)e(as)h(a)g(cell)f(in)h(a)
g(spreadsheet,)g(or)f(a)h(file)g(on)f(a)h(disk)f(somewhere.)17
b(They)0 1030 y(are)d(often)f(stateless;)g(when)g(they)f(do)h(have)h
(state,)f(it)g(is)g(typically)e(backed)j(by)f(some)g(form)h(of)f
(stable)g(storage,)g(as)h(they)0 1092 y(have)d(to)g(be)g(available)g
(across)g(crashes)g(of)g(their)g(server)g(program.)62
1229 y(ILU)18 b(provides)e(an)h(automatic)g(system)g(for)g
Fe(distributed)e(garbage)j(collection)g Fg(of)g(transient)e(objects;)j
(that)d(is,)j(of)0 1292 y(removing)11 b(them)h(from)h(everyone's)e
(address)g(space)h(when)g(everyone)f(is)h(done)f(with)g(them.)i(This)e
(uses)g(the)h(underlying)0 1354 y(garbage)17 b(collection)f(techniques)
g(of)i(the)f(particular)g(programming)g(language)g(being)f(used.)30
b(With)17 b(Java,)i(the)e(ILU)0 1416 y(garbage)9 b(collector)g(works)f
(in)h(conjunction)e(with)h(the)h(Java)g(collector;)g(with)f(ANSI)i(C,)g
(we)f(use)g(the)g(extremely)g(primitive)0 1478 y(collector)i(provided)g
(for)i(C;)f(that)f(is,)i(when)e(the)h(process)g(terminates,)g(the)g
(objects)f(are)i(collected.)h(To)d(indicate)h(to)f(ILU)0
1541 y(that)h(a)h(particular)e(object)h(type)g(is)g(to)g(be)g(treated)g
(as)h(transient,)f(you)f(mark)i(the)f(object)g(type)g(specification,)f
(in)h(the)g(ISL,)0 1603 y(with)e(the)h(keyword)f Fh(COLLECTIBLE)p
Fg(.)62 1740 y(For)j(permanent)f(objects,)f(like)h(the)f
Fh(Tutorial.Factory)g Fg(object)g(type,)h(the)g(ILU)g(Java)g(support)f
(will)g(maintain)g(a)0 1802 y(reference)h(to)f(the)g(instance,)g
(preventing)e(the)i(Java)h(collector)e(from)i(collecting)d(it.)p
eop
%%Page: 24 25
24 24 bop 0 -58 a Fg(Appendix)10 b(A:)g(General)i(ILU)f(Info)1339
b(24)0 183 y Fb(Appendix)14 b(A)36 b(General)14 b(ILU)h(Info)62
370 y Fg(The)g(Inter-Language)e(Unification)g(system)h(\(ILU\))h(is)f
(a)g(multi-language)f(object)h(interface)h(system.)21
b(The)14 b(object)0 432 y(interfaces)9 b(provided)g(by)g(ILU)h(hide)f
(implementation)f(distinctions)e(between)k(different)f(languages,)g
(between)h(different)0 495 y(address)g(spaces,)h(and)g(between)g
(operating)e(system)i(types.)f(ILU)h(can)g(be)g(used)f(to)h(build)e
(multi-lingual)g(object-oriented)0 557 y(libraries)17
b(\()p Fh(")p Fg(class)g(libraries)p Fh(")p Fg(\))h(with)e
(well-specified)h(language-independent)e(interfaces.)32
b(It)18 b(can)g(also)f(be)h(used)g(to)0 619 y(implement)12
b(distributed)d(systems.)k(It)f(can)g(also)g(be)g(used)f(to)h(define)g
(and)f(document)h(interfaces)g(between)f(the)h(modules)0
681 y(of)f(non-distributed)d(programs.)62 818 y(The)i(2.0)f(release)h
(of)g(ILU)g(contains)e(support)g(for)i(the)f(programming)g(languages)g
(ANSI)h(C,)g(C)p Fh(++)p Fg(,)h(Python,)e(Java,)h(and)0
881 y(Common)h(Lisp.)g(It)g(has)f(been)h(installed)f(on)g(many)h
(flavors)g(of)g(UNIX,)g(including)e(SPARC)j(machines)f(running)e(SunOS)
0 943 y(4.1.3)j(and)f(Solaris)g(2,)h(SGI)h(MIPS)f(machines)g(running)e
(IRIX)j(5.2,)f(Intel)f(486)g(machines)g(running)g(Linux)f(1.1.78,)i
(DEC)0 1005 y(Alpha)h(machines)g(with)g(OSF/1,)h(IBM)h(RS/6000)e
(machines)h(running)e(AIX,)i(and)f(HP)h(machines)f(running)g(HP/UX.)g
(It)0 1067 y(runs)g(on)g(Microsoft)g(Windows)e(3.1,)k(Windows)c(95,)j
(and)g(Windows)d(NT)i(environments.)k(It)d(supports)d(both)i(threaded)0
1130 y(and)i(non-threaded)f(operation.)21 b(Since)15
b(one)g(of)g(the)g(implementation)e(goals)h(of)h(ILU)g(is)g(to)f
(maximize)i(compatibility)0 1192 y(with)11 b(existing)f(open)h
(standards,)g(ILU)h(provides)e(support)g(for)i(use)g(of)g(the)f(OMG)h
(CORBA)g(IDL)g(interface)g(description)0 1254 y(language,)g(and)g(can)g
(be)g(thought)e(of)i(as)g(a)g(CORBA)h(ORB)f(system)g(\(though)e(with)h
(omissions)f(from)j(and)f(extensions)e(to)0 1316 y(the)h(CORBA)h
(spec\).)f(As)g(another)g(result,)g(ILU)g(includes)f(a)h
(self-contained)f(implementation)g(of)h(ONC)g(RPC.)62
1453 y(ILU)g(is)g(available)f(free)i(from)g Fh
(ftp://ftp.parc.xerox.com/pub/ilu/ilu.htm)o(l)p Fg(.)p
eop
%%Page: 25 26
25 25 bop 0 -58 a Fg(Appendix)10 b(B:)h(Commandline)g(mumbojumbo)1135
b(25)0 183 y Fb(Appendix)14 b(B)36 b(Commandline)13 b(mumbojumbo)62
370 y Fg(Before)f(running)e(any)h(java)g(stuff,)g(a)h(few)f
(environment)f(variables)h(need)g(to)g(be)g(set)g(up.)62
507 y(Make)16 b(sure)f(the)g Fh(")p Fg(java)p Fh(")g
Fg(interpreter)g(is)f(on)h(your)g(PATH,)g(and)g(that)f
Fh(")p Fg($\(ILUHOME\)/bin)p Fh(")g Fg(is)g(on)h(your)g(path.)23
b(If)0 569 y(you)11 b(use)h(the)f(literal)h(expression)e
Fh(")p Fg($\(ILUHOME\)/bin)p Fh(")p Fg(,)h(make)h(sure)g(that)f(the)h
(environment)f(variable)g(ILUHOME)h(is)0 632 y(properly)e(defined.)62
769 y(2.)i(Make)g(sure)f Fh(")p Fg(./classes)p Fh(")f
Fg(and)h Fh(")p Fg($\(ILUHOME\)/lib/ilu.jar)p Fh(")d
Fg(are)k(on)f(your)g(CLASSPATH.)62 906 y(3.)h(Make)g(sure)f(your)f(LD)p
468 906 14 3 v 16 w(LIBRARY)p 683 906 V 17 w(PATH)h(has)g
Fh(")p Fg($\(ILUHOME\)/lib)p Fh(")f Fg(on)g(it.)p eop
%%Page: 26 27
26 26 bop 0 -58 a Fg(Appendix)10 b(C:)h(Tutorial.isl)1457
b(26)0 183 y Fb(Appendix)14 b(C)36 b(Tutorial.isl)120
370 y Fh(INTERFACE)24 b(Tutorial;)120 470 y(EXCEPTION)g(DivideByZero)
170 519 y("this)g(error)h(is)f(signalled)g(if)h(the)g(client)f(of)h
(the)g(Calculator)e(calls)120 569 y(the)i(Divide)f(method)g(with)h(a)g
(value)f(of)h(0";)120 669 y(TYPE)g(Calculator)f(=)g(OBJECT)h
(COLLECTIBLE)170 719 y(DOCUMENTATION)f("4-function)f(calculator")170
769 y(METHODS)220 818 y(SetValue)h(\(v)h(:)f(REAL\))h("Set)f(the)h
(value)f(of)h(the)g(calculator)f(to)g(`v'",)220 868 y(GetValue)g(\(\))h
(:)f(REAL)50 b("Return)24 b(the)h(value)f(of)h(the)f(calculator",)220
918 y(Add)g(\(v)h(:)g(REAL\))149 b("Adds)24 b(`v')h(to)g(the)f
(calculator's)g(value",)220 968 y(Subtract)g(\(v)h(:)f(REAL\))h
("Subtracts)f(`v')g(from)h(the)g(calculator's)e(value",)220
1018 y(Multiply)h(\(v)h(:)f(REAL\))h("Multiplies)f(the)g(calculator's)g
(value)g(by)h(`v'",)220 1067 y(Divide)f(\(v)h(:)g(REAL\))f(RAISES)g
(DivideByZero)g(END)269 1117 y("Divides)h(the)f(calculator's)g(value)g
(by)h(`v'")170 1167 y(END;)120 1267 y(TYPE)g(Factory)f(=)h(OBJECT)170
1316 y(METHODS)220 1366 y(CreateCalculator)e(\(\))i(:)g(Calculator)170
1416 y(END;)p eop
%%Page: 27 28
27 27 bop 0 -58 a Fg(Appendix)10 b(D:)g(CalculatorImpl.java)1295
b(27)0 183 y Fb(Appendix)14 b(D)36 b(CalculatorImpl.java)120
370 y Fh(package)24 b(Tutorial;)120 470 y(/*)145 519
y(*)h(While)f(this)h(class)f(matches)g(the)h(Tutorial.isl)f
(specification)145 569 y(*)h(it)f(is)h(a)g(local)f(implementation.)49
b(Its)24 b(instances)h(need)f(to)h(be)145 619 y(*)g(registered)f
(explicitely)g(or)g(implicitely)g(with)h(Ilu)f(before)h(they)145
669 y(*)g(are)f(publicly)h(accessible.)145 719 y(*/)120
818 y(public)f(class)h(CalculatorImpl)319 868 y(extends)g
(xerox.ilu.IluObjectBase)319 918 y(implements)f(Tutorial.Calculator)f
({)220 968 y(double)h(theValue)g(=)h(0.0;)220 1018 y(public)f
(CalculatorImpl\(\){)319 1067 y(theValue)g(=)h(0.0;)220
1117 y(})220 1167 y(public)f(void)h(SetValue\(double)e(v\))i({)319
1217 y(theValue)f(=)h(v;)220 1267 y(})220 1316 y(public)f(double)g
(GetValue\(\))g({)319 1366 y(return)h(theValue;)220 1416
y(})220 1466 y(public)f(void)h(Add\(double)e(v\))i({)319
1516 y(theValue)f(=)h(theValue)f(+)h(v;)220 1566 y(})220
1615 y(public)f(void)h(Subtract\(double)e(v\))i({)319
1665 y(theValue)f(=)h(theValue)f(-)h(v;)220 1715 y(})220
1765 y(public)f(void)h(Multiply\(double)e(v\))i({)319
1815 y(theValue)f(=)h(theValue)f(*)h(v;)220 1864 y(})220
1914 y(public)f(void)h(Divide\(double)e(v\))i(throws)f
(Tutorial.DivideByZero)f({)319 1964 y(if)i(\(v==0.0\))f(throw)h(new)f
(Tutorial.DivideByZero\(\);)319 2014 y(theValue)g(=)h(theValue)f(/)h
(v;)220 2064 y(})120 2114 y(})g(//CalculatorImpl)p eop
%%Page: 28 29
28 28 bop 0 -58 a Fg(Appendix)10 b(E:)g(simple1.java)1431
b(28)0 183 y Fb(Appendix)14 b(E)36 b(simple1.java)120
370 y Fh(/*)145 420 y(*)25 b(A)g(simple)f(client)g(program)g(that)h
(demonstrates)f(the)g(use)h(of)g(the)145 470 y(*)g(Calculator)f(module)
g(as)h(a)g(library.)145 519 y(*/)120 619 y(/*)145 669
y(*)g(Run)f(this)h(like)145 719 y(*)g(java)f(Tutorial.simple1)g(number)
g([number...])145 769 y(*/)120 868 y(package)g(Tutorial;)120
968 y(public)g(class)h(simple1)f({)220 1067 y(public)g(static)g(void)h
(main\(String)f(argv[]\))g({)319 1117 y(CalculatorImpl)g(calc;)319
1167 y(//create)g(the)h(calculator)319 1217 y(calc)g(=)g(new)f
(CalculatorImpl\(\);)319 1267 y(if)h(\(calc==null\))f({)419
1316 y(System.err.println\("Got)f(null)h(TapeCalculator"\);)419
1366 y(System.exit\(1\);)319 1416 y(})319 1466 y(//clear)h(the)f
(calculator)g(before)g(using)h(it)319 1516 y(calc.SetValue\(0.0\);)319
1566 y(//now)g(loop)f(over)h(the)f(arguments,)g(adding)h(each)f(in)h
(turn)319 1615 y(int)g(i)g(=)g(0;)319 1665 y(while)g(\(i<argv.length\))
e({)419 1715 y(Double)h(v)h(=)g(Double.valueOf\(argv[i]\);)e(//don't)h
(bother)g(about)h(exceptions)419 1765 y(calc.Add\(v.doubleValue\(\)\);)
419 1815 y(i)g(=)g(i+1;)319 1864 y(})319 1914 y(//and)g(print)f(the)h
(result)319 1964 y(System.out.println\("The)e(sum)i(is)f(")h(+)g
(calc.GetValue\(\)\);)220 2014 y(})f(//main)120 2114
y(})h(//simple1)p eop
%%Page: 29 30
29 29 bop 0 -58 a Fg(Appendix)10 b(F:)h(simple2.java)1433
b(29)0 183 y Fb(Appendix)14 b(F)36 b(simple2.java)120
379 y Fh(/*)145 428 y(*)25 b(A)g(simple)f(client)g(program)g(that)h
(demonstrates)f(the)g(use)h(of)g(the)145 478 y(*)g(Calculator)f(stub)g
(module)h(with)f(a)h(local)f(implementation.)145 528
y(*/)120 628 y(/*)145 677 y(*)h(Run)f(this)h(like)145
727 y(*)g(java)f(Tutorial.simple2)g(number)g([number...])145
777 y(*/)120 877 y(package)g(Tutorial;)120 976 y(public)g(class)h
(simple2)f({)220 1076 y(public)g(static)g(void)h(main\(String)f
(argv[]\))g({)319 1126 y(Tutorial.Calculator)f(calc;)50
b(//Interface)24 b(from)g(stubbing...)319 1176 y(try)h({)419
1225 y(//create)f(the)h(calculator)419 1275 y(calc)f(=)h(new)g
(Tutorial.CalculatorImpl\(\);)419 1325 y(if)g(\(calc==null\))e({)543
1375 y(System.err.println\("Couldn't)g(create)h(calculator"\);)543
1425 y(System.exit\(1\);)419 1474 y(})419 1524 y(//clear)g(the)h
(calculator)f(before)g(using)h(it)419 1574 y(if)g(\(argv.length<1\))e
({)519 1624 y(calc.SetValue\(0.0\);)419 1674 y(})i(else)f({)519
1724 y(Double)g(v)h(=)f(Double.valueOf\(argv[0]\);)519
1773 y(calc.SetValue\(v.doubleValue\(\)\);)419 1823 y(})419
1873 y(//now)g(loop)h(over)f(the)h(arguments,)f(adding)g(each)h(in)g
(turn)419 1923 y(int)g(i)f(=)h(1;)419 1973 y(while)f(\(i<argv.length\))
g({)519 2022 y(Double)g(v)h(=)f(Double.valueOf\(argv[i]\);)f(//don't)h
(bother...)519 2072 y(calc.Divide\(v.doubleValue\(\)\);)519
2122 y(i)g(=)h(i+1;)419 2172 y(})419 2222 y(//and)f(print)h(the)f
(result)419 2271 y(System.out.println\("the)f('sum')h(is)h(")g(+)f
(calc.GetValue\(\)\);)319 2321 y(})h(catch)g(\(Tutorial.DivideByZero)d
(e\))j({)419 2371 y(System.err.println\("raised)d(DivideByZero)i
(exception:)g(")h(+)g(e\);)319 2421 y(})g(catch)g
(\(org.omg.CORBA.SystemException)d(e\))i({)419 2471 y
(System.err.println\("raised)e(CORBA)j(SystemException:)e(")i(+)g(e\);)
319 2521 y(})220 2570 y(})f(//main)120 2670 y(})h(//simple2)p
eop
%%Page: 30 31
30 30 bop 0 -58 a Fg(Appendix)10 b(G:)g(TutorialServer.java)1305
b(30)0 183 y Fb(Appendix)14 b(G)36 b(TutorialServer.java)120
379 y Fh(/*)145 428 y(*)25 b(Run)f(this)h(like)145 478
y(*)g(java)f(Tutorial.TutorialServer)f(servername)145
528 y(*/)120 578 y(package)h(Tutorial;)120 677 y(import)g
(Tutorial.Calculator;)120 727 y(import)g(Tutorial.Factory;)120
777 y(import)g(Tutorial.DivideByZero;)120 827 y(import)g
(Tutorial.CalculatorStub;)120 877 y(import)g(Tutorial.FactoryStub;)120
976 y(import)g(Tutorial.CalculatorImpl;)120 1076 y(import)g
(xerox.ilu.Ilu;)120 1126 y(import)g(xerox.ilu.IluSimpleBinding;)120
1176 y(import)g(org.omg.CORBA.SystemException;)120 1225
y(import)g(xerox.ilu.IluServer;)120 1375 y(class)g(FactoryImpl)319
1425 y(extends)h(xerox.ilu.IluObjectBase)319 1474 y(implements)f
(Tutorial.Factory)49 b({)220 1524 y(xerox.ilu.IluServer)23
b(server;)220 1574 y(public)h(FactoryImpl\(xerox.ilu.IluServer)e
(server\))i({)319 1624 y(this.server)g(=)h(server;)220
1674 y(})220 1724 y(public)f(Tutorial.Calculator)f
(CreateCalculator\(\))519 1773 y(throws)h
(org.omg.CORBA.SystemException)220 1823 y({)319 1873
y(Tutorial.Calculator)f(calc)i(=)g(new)f(Tutorial.CalculatorImpl\(\);)
319 1923 y(xerox.ilu.Ilu.registerTrueObject\()419 1973
y(xerox.ilu.Ilu.inventID\(\),)419 2022 y(calc,)419 2072
y(this.server,)419 2122 y(Tutorial.CalculatorStub.iluClass\(\),)419
2172 y(xerox.ilu.Ilu.unspec)419 2222 y(\);)319 2271 y(return)h(calc;)
220 2321 y(})120 2371 y(})g(//FactoryImpl)120 2521 y(public)f(class)h
(TutorialServer)e({)220 2570 y(static)h(FactoryImpl)g(factory;)220
2620 y(static)g(xerox.ilu.IluServer)f(trueServer;)220
2670 y(public)h(static)g(void)h(main\(String)f(argv[]\))g({)p
eop
%%Page: 31 32
31 31 bop 0 -58 a Fg(Appendix)10 b(G:)g(TutorialServer.java)1305
b(31)319 183 y Fh(try)25 b({)419 233 y(String)f(serverId;)419
283 y(if)h(\(argv.length)e(<)i(1\))g({)543 333 y
(System.out.println\("Must)e(specify)h(a)h(server)f(id"\);)543
382 y(return;)419 432 y(})419 482 y(//Create)g(a)h(server)f(with)h
(appropriate)f(server)g(id)h(\(which)f(is)419 532 y(//taken)g(from)h
(the)f(first)h(argument\))419 582 y(serverId)f(=)h(argv[0];)419
632 y(trueServer)f(=)h(xerox.ilu.IluServer.createServer\(s)o
(erverId\);)419 681 y(//Now)f(create)h(an)f(instance)h(of)f(a)h
(Factory)f(object)h(on)f(the)h(server)419 731 y(//with)f(an)h(instance)
f(handle)g("theFactory")419 781 y(factory)g(=)h(new)g
(FactoryImpl\(trueServer\);)419 831 y
(xerox.ilu.Ilu.registerTrueObject\()519 881 y("theFactory",)519
930 y(factory,)519 980 y(trueServer,)519 1030 y
(Tutorial.FactoryStub.iluClass\(\),)519 1080 y
(xerox.ilu.IluLifetimeArgs.iluLife)o(timeRememb)o(er)519
1130 y(\);)419 1180 y(//Make)f(the)h(factory)f(well)h(known)f(by)h
(publishing)f(it)419 1229 y(xerox.ilu.IluSimpleBinding.publish\(fa)o
(ctory\);)419 1279 y(//Now)g(we)h(print)f(the)h(string)f(binding)h
(handle)f(\(the)h(object's)f(name)419 1329 y(//plus)g(its)h(location\))
f(of)h(the)f(new)h(Factory)f(instance)419 1379 y
(System.out.println\("Factory)e(instance)i(published"\);)419
1429 y(System.out.println\("Its)f(SBH)h(is)h('")g(+)g
(xerox.ilu.Ilu.sbhOfObject\(factory)o(\))120 1478 y(+)g("'"\);)419
1528 y(//the)f(program)h(doesn't)f(terminate)g(because)g(the)h(server)f
(is)h(still)f(alive...)319 1578 y(})h(catch)g
(\(org.omg.CORBA.SystemException)d(e\))i({)419 1628 y
(System.out.println\("raised)e(CORBA)j(SystemException)e(:)i(")g(+)g
(e\);)319 1678 y(})220 1727 y(})120 1777 y(})g(//TutorialServer)p
eop
%%Page: 32 33
32 32 bop 0 -58 a Fg(Appendix)10 b(H:)g(simple3.java)1426
b(32)0 183 y Fb(Appendix)14 b(H)36 b(simple3.java)120
379 y Fh(/*)145 428 y(*)25 b(A)g(simple)f(client)g(program)g(that)h
(finds)f(the)h(Calculator-Factory,)145 478 y(*)g(creates)f(a)h
(calculator,)f(and)g(adds)h(up)g(its)f(arguments.)145
528 y(*/)120 628 y(/*)145 677 y(*)h(Run)f(this)h(like)145
727 y(*)g(java)f(Tutorial.simple3)g(servername)g(number)g([number...])
145 777 y(*)h(after)f(making)h(sure)f(a)h(server)f(is)h(running.)145
827 y(*/)120 927 y(package)f(Tutorial;)120 1026 y(public)g(class)h
(simple3)f({)220 1126 y(/*)g(We)h(define)f(a)h(new)g(routine,)f
("Get_Tutorial_Calculator",)e(which)245 1176 y(*)i(finds)h(the)f
(tutorial)h(factory,)f(then)g(creates)h(a)f(new)h(Calculator)245
1225 y(*)f(object)h(for)f(us.)245 1275 y(*/)220 1325
y(public)g(static)g(Tutorial.Calculator)220 1375 y
(GetTutorialCalculator\(String)e(serverId,)i(String)g(factoryId\))g({)
319 1425 y(Tutorial.Factory)g(factory)g(=)h(null;)319
1474 y(Tutorial.Calculator)e(calc)i(=)g(null;)319 1524
y(System.out.println\("Looking)e(up)h(factory"\);)319
1574 y(try)h({)419 1624 y(/*)g(We)f(have)h(to)g(call)f(lookup)g(with)h
(the)g(object)f(ID)h(of)444 1674 y(*)g(the)f(factory)g(object,)h(and)f
(the)h(``type'')f(of)h(the)f(object)444 1724 y(*)h(we're)f(looking)g
(for.)444 1773 y(*/)419 1823 y(factory)g(=)h(\(Tutorial.Factory\))817
1873 y(xerox.ilu.IluSimpleBinding.lookup\()618 1923 y(serverId,)618
1973 y(factoryId,)618 2022 y(Tutorial.FactoryStub.iluClass\(\))618
2072 y(\);)319 2122 y(})g(catch)g(\(org.omg.CORBA.SystemException)d
(e\))i({)419 2172 y(System.err.println\("Failed)e(to)j(get)g(factory:)f
(")h(+)f(e\);)419 2222 y(System.exit\(1\);)319 2271 y(})319
2321 y(if)h(\(factory==null\))e({)419 2371 y(System.err.println\("Got)g
(null)h(factory"\);)419 2421 y(System.exit\(1\);)319
2471 y(})319 2521 y(System.out.println\("Got)f(factory)h(")h(+)g
(factory\);)319 2570 y(System.out.println\("Looking)e(up)h
(Calculator"\);)319 2620 y(try)h({)419 2670 y(calc)f(=)h
(factory.CreateCalculator\(\);)p eop
%%Page: 33 34
33 33 bop 0 -58 a Fg(Appendix)10 b(H:)g(simple3.java)1426
b(33)319 183 y Fh(})25 b(catch)g(\(org.omg.CORBA.SystemException)d(e\))
i({)419 233 y(System.err.println\("Failed)e(to)j(get)g(Calculator:)f(")
g(+)h(e\);)419 283 y(System.exit\(1\);)319 333 y(})319
382 y(if)g(\(calc==null\))f({)419 432 y(System.err.println\("Got)f
(null)h(Calculator"\);)419 482 y(System.exit\(1\);)319
532 y(})319 582 y(System.out.println\("Got)f(Calculator)h(")h(+)g
(calc\);)319 632 y(return)g(calc;)220 681 y(})f
(//GetTutorialCalculator)220 831 y(public)g(static)g(void)h
(main\(String)f(argv[]\))g({)319 881 y(Tutorial.Calculator)f(calc;)319
930 y(if)i(\(argv.length)f(<)h(2\))f({)419 980 y
(System.err.println\("usage:)e(java)j(Tutorial.simple3)e(number*"\);)
419 1030 y(System.exit\(1\);)319 1080 y(})319 1130 y(//Find)i(a)f
(calculator)319 1180 y(String)h(serverId)f(=)h(argv[0];)319
1229 y(calc)g(=)g(GetTutorialCalculator\(serverId,)d("theFactory"\);)
319 1279 y(if)j(\(calc==null\))f({)419 1329 y
(System.out.println\("Null)f(calculator"\);)419 1379
y(System.exit\(1\);)319 1429 y(})319 1478 y(try)i({)419
1528 y(//clear)f(the)h(calculator)f(before)g(using)h(it)419
1578 y(calc.SetValue\(0.0\);)419 1628 y(//now)f(loop)h(over)f(the)h
(arguments,)f(adding)g(each)h(in)g(turn)419 1678 y(int)g(i)f(=)h(1;)419
1727 y(while)f(\(i<argv.length\))g({)519 1777 y(Double)g(v)h(=)f
(Double.valueOf\(argv[i]\);//exceptions)e(possible)519
1827 y(calc.Add\(v.doubleValue\(\)\);)519 1877 y(i)i(=)h(i+1;)419
1927 y(})419 1977 y(//and)f(print)h(the)f(result)419
2026 y(System.out.println\("The)f(sum)h(is)h(")g(+)g
(calc.GetValue\(\)\);)120 2126 y(/*)g(This)f(is)h(awfull)f(but)h(Java)f
(does)h(not)g(let)f(you)h(catch)f(exceptions)g(which)145
2176 y(*)h(are)f(not)h(raised.)49 b(What)25 b(an)f(idiotic)h(feature!)
145 2226 y(*)149 b(})25 b(catch)g(\(Tutorial.DivideByZero)d(e\))j({)145
2275 y(*)249 b(System.err.println\("Division)22 b(by)j(zero:)f(")h(+)g
(e\);)145 2325 y(*/)319 2425 y(})g(catch)g
(\(org.omg.CORBA.SystemException)d(e\))i({)419 2475 y
(System.err.println\("Some)f(CORBA)h(SystemException:)f(")i(+)g(e\);)
319 2524 y(})220 2574 y(})f(//main)p eop
%%Page: 34 35
34 34 bop 0 -58 a Fg(Appendix)10 b(H:)g(simple3.java)1426
b(34)120 183 y Fh(})25 b(//simple3/*)145 233 y(*)g(A)g(simple)f(client)
g(program)g(that)h(finds)f(the)h(Calculator-Factory,)145
283 y(*)g(creates)f(a)h(calculator,)f(and)g(adds)h(up)g(its)f
(arguments.)145 333 y(*/)120 432 y(/*)145 482 y(*)h(Run)f(this)h(like)
145 532 y(*)g(java)f(Tutorial.simple3)g(servername)g(number)g
([number...])145 582 y(*)h(after)f(making)h(sure)f(a)h(server)f(is)h
(running.)145 632 y(*/)120 731 y(package)f(Tutorial;)120
831 y(import)g(xerox.ilu.Ilu;)120 881 y(import)g
(org.omg.CORBA.SystemException;)120 930 y(import)g
(xerox.ilu.IluServer;)120 980 y(import)g(Tutorial.DivideByZero;)120
1080 y(public)g(class)h(simple3)f({)220 1180 y(/*)g(We)h(define)f(a)h
(new)g(routine,)f("Get_Tutorial_Calculator",)e(which)245
1229 y(*)i(finds)h(the)f(tutorial)h(factory,)f(then)g(creates)h(a)f
(new)h(Calculator)245 1279 y(*)f(object)h(for)f(us.)245
1329 y(*/)220 1379 y(public)g(static)g(Tutorial.Calculator)220
1429 y(GetTutorialCalculator\(String)e(serverId,)i(String)g
(factoryId\))g({)319 1478 y(Tutorial.Factory)g(factory)g(=)h(null;)319
1528 y(Tutorial.Calculator)e(calc)i(=)g(null;)319 1578
y(System.out.println\("Looking)e(up)h(factory"\);)319
1628 y(try)h({)419 1678 y(/*)g(We)f(have)h(to)g(call)f(lookupObject)g
(with)g(the)h(object)f(ID)h(of)444 1727 y(*)g(the)f(factory)g(object,)h
(and)f(the)h(``type'')f(of)h(the)f(object)h(we're)f(looking)444
1777 y(*)h(for.)444 1827 y(*/)419 1877 y(factory)f(=)h
(\(Tutorial.Factory\))444 1927 y(xerox.ilu.Ilu.lookupObject\()444
1977 y(serverId,)444 2026 y(factoryId,)444 2076 y
(Tutorial.FactoryStub.iluClass\(\))444 2126 y(\);)319
2176 y(})g(catch)g(\(org.omg.CORBA.SystemException)d(e\))i({)419
2226 y(System.err.println\("Failed)e(to)j(get)g(factory:)f(")h(+)f
(e\);)419 2275 y(System.exit\(1\);)319 2325 y(})319 2375
y(if)h(\(factory==null\))e({)419 2425 y(System.err.println\("Got)g
(null)h(factory"\);)419 2475 y(System.exit\(1\);)319
2524 y(})319 2574 y(System.out.println\("Got)f(factory)h(")h(+)g
(factory\);)319 2624 y(System.out.println\("Looking)e(up)h
(Calculator"\);)p eop
%%Page: 35 36
35 35 bop 0 -58 a Fg(Appendix)10 b(H:)g(simple3.java)1426
b(35)319 183 y Fh(try)25 b({)419 233 y(calc)f(=)h
(factory.CreateCalculator\(\);)319 283 y(})g(catch)g
(\(org.omg.CORBA.SystemException)d(e\))i({)419 333 y
(System.err.println\("Failed)e(to)j(get)g(Calculator:)f(")g(+)h(e\);)
419 382 y(System.exit\(1\);)319 432 y(})319 482 y(if)g(\(calc==null\))f
({)419 532 y(System.err.println\("Got)f(null)h(Calculator"\);)419
582 y(System.exit\(1\);)319 632 y(})319 681 y(System.out.println\("Got)
f(Calculator)h(")h(+)g(calc\);)319 731 y(return)g(calc;)220
781 y(})f(//GetTutorialCalculator)220 930 y(public)g(static)g(void)h
(main\(String)f(argv[]\))g({)319 980 y(Tutorial.Calculator)f(calc;)319
1030 y(if)i(\(argv.length)f(<)h(2\))f({)419 1080 y
(System.err.println\("usage:)e(java)j(Tutorial.simple3)e(number*"\);)
419 1130 y(System.exit\(1\);)319 1180 y(})319 1229 y(//Find)i(a)f
(calculator)319 1279 y(String)h(serverId)f(=)h(argv[0];)319
1329 y(calc)g(=)g(GetTutorialCalculator\(serverId,)d("theFactory"\);)
319 1379 y(if)j(\(calc==null\))f({)419 1429 y
(System.out.println\("Null)f(calculator"\);)419 1478
y(System.exit\(1\);)319 1528 y(})319 1578 y(try)i({)419
1628 y(//clear)f(the)h(calculator)f(before)g(using)h(it)419
1678 y(calc.SetValue\(0.0\);)419 1727 y(//now)f(loop)h(over)f(the)h
(arguments,)f(adding)g(each)h(in)g(turn)419 1777 y(int)g(i)f(=)h(1;)419
1827 y(while)f(\(i<argv.length\))g({)519 1877 y(Double)g(v)h(=)f
(Double.valueOf\(argv[i]\);//exceptions)e(possible)519
1927 y(calc.Add\(v.doubleValue\(\)\);)519 1977 y(i)i(=)h(i+1;)419
2026 y(})419 2076 y(//and)f(print)h(the)f(result)419
2126 y(System.out.println\("The)f(sum)h(is)h(")g(+)g
(calc.GetValue\(\)\);)319 2176 y(})g(catch)g
(\(org.omg.CORBA.SystemException)d(e\))i({)419 2226 y
(System.err.println\("Some)f(IluException:)g(")i(+)g(e\);)319
2275 y(})220 2325 y(})f(//main)120 2425 y(})h(//simple3)p
eop
%%Page: 36 37
36 36 bop 0 -58 a Fg(Appendix)10 b(I:)h(Tutorial2.isl)1449
b(36)0 183 y Fb(Appendix)14 b(I)36 b(Tutorial2.isl)120
370 y Fh(INTERFACE)24 b(Tutorial2)g(IMPORTS)g(Tutorial)h(END;)120
470 y(TYPE)g(OpType)f(=)h(ENUMERATION)220 519 y(SetValue,)f(Add,)g
(Subtract,)g(Multiply,)g(Divide)h(END;)120 619 y(TYPE)g(Operation)f(=)g
(RECORD)220 669 y(op)g(:)h(OpType,)220 719 y(value)f(:)h(REAL,)220
769 y(accumulator)f(:)g(REAL)170 818 y(END;)120 918 y(TYPE)h
(RegisterTape)e(=)i(SEQUENCE)f(OF)h(Operation;)120 1018
y(TYPE)g(TapeCalculator)e(=)i(OBJECT)f(COLLECTIBLE)170
1067 y(SUPERTYPES)g(Tutorial.Calculator)f(END)170 1117
y(DOCUMENTATION)h("4)g(function)g(calculator)g(with)h(register)f(tape")
170 1167 y(METHODS)220 1217 y(GetTape)g(\(\))h(:)f(RegisterTape)170
1267 y(END;)120 1366 y(TYPE)h(Factory)f(=)h(OBJECT)f(SUPERTYPES)g
(Tutorial.Factory)f(END)170 1416 y(METHODS)220 1466 y
(CreateTapeCalculator)g(\(\))h(:)h(TapeCalculator)170
1516 y(END;)p eop
%%Page: 37 38
37 37 bop 0 -58 a Fg(Appendix)10 b(J:)g(TapeCalculatorImpl.java)1219
b(37)0 183 y Fb(Appendix)14 b(J)36 b(TapeCalculatorImpl.java)120
379 y Fh(package)24 b(Tutorial2;)120 478 y(import)g(java.util.Vector;)
120 528 y(import)g(Tutorial2.OpType;)120 578 y(import)g
(Tutorial2.Operation;)120 677 y(/*)145 727 y(*)h(While)f(this)h(class)f
(complies)g(to)h(the)g(Tutorial2.isl)e(specification)145
777 y(*)i(it)f(is)h(a)g(local)f(implementation.)49 b(Its)24
b(instances)h(need)f(to)h(be)145 827 y(*)g(registered)f(with)g(Ilu)h
(before)f(they)h(are)f(publicly)h(accessible.)145 877
y(*/)120 976 y(public)f(class)h(TapeCalculatorImpl)419
1026 y(extends)f(xerox.ilu.IluObjectBase)419 1076 y(implements)g
(Tutorial2.TapeCalculator)f({)220 1126 y(double)h(value;)220
1176 y(java.util.Vector)f(tape;)220 1225 y(public)h
(TapeCalculatorImpl\(\))f({)319 1275 y(value)i(=)g(0.0;)319
1325 y(tape)g(=)g(new)f(java.util.Vector\(\);)220 1375
y(})220 1425 y(public)g(void)h(SetValue\(double)e(v\))i({)319
1474 y(value)g(=)g(v;)319 1524 y(Operation)f(op)h(=)g(new)f
(Operation\(OpType.SetValue,)f(v,)i(value\);)319 1574
y(tape.addElement\(op\);)220 1624 y(})220 1674 y(public)f(double)g
(GetValue\(\))g({)319 1724 y(return)h(value;)220 1773
y(})220 1823 y(public)f(void)h(Add\(double)e(v\))i({)319
1873 y(value)g(=)g(value)f(+)h(v;)319 1923 y(Operation)f(op)h(=)g(new)f
(Operation\(OpType.Add,)f(v,)i(value\);)319 1973 y
(tape.addElement\(op\);)220 2022 y(})220 2072 y(public)f(void)h
(Subtract\(double)e(v\))i({)319 2122 y(value)g(=)g(value)f(-)h(v;)319
2172 y(Operation)f(op)h(=)g(new)f(Operation\(OpType.Subtract,)f(v,)i
(value\);)319 2222 y(tape.addElement\(op\);)220 2271
y(})220 2321 y(public)f(void)h(Multiply\(double)e(v\))i({)319
2371 y(value)g(=)g(value)f(*)h(v;)319 2421 y(Operation)f(op)h(=)g(new)f
(Operation\(OpType.Multiply,)f(v,)i(value\);)319 2471
y(tape.addElement\(op\);)220 2521 y(})220 2570 y(public)f(void)h
(Divide\(double)e(v\))i(throws)f(Tutorial.DivideByZero)f({)319
2620 y(if)i(\(v==0.0\))f(throw)h(new)f(Tutorial.DivideByZero\(\);)319
2670 y(if)h(\(v==1.0\))f(tape)h(=)f(null;)h(//raise)f(an)h(unexpected)f
(exception)g(for)h(debugging)p eop
%%Page: 38 39
38 38 bop 0 -58 a Fg(Appendix)10 b(J:)g(TapeCalculatorImpl.java)1219
b(38)319 183 y Fh(value)25 b(=)g(value)f(/)h(v;)319 233
y(Operation)f(op)h(=)g(new)f(Operation\(OpType.Divide,)f(v,)i(value\);)
319 283 y(tape.addElement\(op\);)220 333 y(})220 382
y(public)f(Operation[])g(GetTape\(\))g({)319 432 y(Operation)g
(retVal[];)319 482 y(//We)h(protect)f(structural)g(integrity)g(even)h
(if)f(we)h(don't)f(care)319 532 y(//about)h(the)f(value)h(in)f(case)h
(of)g(a)f(conflict.)319 582 y(synchronized)g(\(tape\))g({)419
632 y(retVal)g(=)h(new)g(Operation[tape.size\(\)];)419
681 y(tape.copyInto\(retVal\);)319 731 y(})319 781 y(return)g(retVal;)
220 831 y(})120 881 y(})g(//TapeCalculatorImpl)p eop
%%Page: 39 40
39 39 bop 0 -58 a Fg(Appendix)10 b(K:)g(Tutorial2Server.java)1282
b(39)0 183 y Fb(Appendix)14 b(K)36 b(Tutorial2Server.java)120
379 y Fh(/*)145 428 y(*)25 b(Run)f(this)h(like)145 478
y(*)g(java)f(Tutorial2.Tutorial2Server)f(servername)145
528 y(*/)120 628 y(package)h(Tutorial2;)120 727 y(import)g
(xerox.ilu.Ilu;)120 777 y(import)g(org.omg.CORBA.SystemException;)120
827 y(import)g(xerox.ilu.IluServer;)120 976 y(class)g(Factory2Impl)419
1026 y(extends)g(xerox.ilu.IluObjectBase)419 1076 y(implements)g
(Tutorial2.Factory)f({)220 1176 y(public)h(Factory2Impl\(\))g({)220
1225 y(})220 1325 y(public)g(Tutorial.Calculator)f
(CreateCalculator\(\))718 1375 y(throws)h
(org.omg.CORBA.SystemException)e({)319 1425 y
(System.out.println\("Factory2Impl:)g(request)i(for)h(a)g(simple)f
(calculator"\);)319 1474 y(return)h(new)f
(Tutorial2.TapeCalculatorImpl\(\);)220 1524 y(})g(//CreateCalculator)
220 1624 y(public)g(Tutorial2.TapeCalculator)f
(CreateTapeCalculator\(\))519 1674 y(throws)h
(org.omg.CORBA.SystemException)e({)319 1724 y
(System.out.println\("Factory2Impl:)g(request)i(for)h(a)g(tape)f
(calculator"\);)319 1773 y(return)h(new)f
(Tutorial2.TapeCalculatorImpl\(\);)220 1823 y(})g
(//CreateTapeCalculator)120 1923 y(})h(//Factory2Impl)120
2072 y(public)f(class)h(Tutorial2Server)e({)220 2122
y(static)h(Factory2Impl)g(factory;)220 2172 y(static)g
(xerox.ilu.IluServer)f(trueServer;)220 2271 y(public)h(static)g(void)h
(main\(String)f(argv[]\))g({)319 2321 y(String)h(serverId;)319
2371 y(if)g(\(argv.length)f(!=)g(1\))h({)419 2421 y
(System.err.println\("usage:)d(java)j(Tutorial2.Tutorial2Server)d
(servername"\);)419 2471 y(System.exit\(1\);)319 2521
y(})319 2570 y(System.out.println\("Create)h(the)h(server"\);)319
2620 y(try)h({)419 2670 y(//Create)f(a)h(server)f(with)h(appropriate)f
(server)g(id)h(\(which)f(is)p eop
%%Page: 40 41
40 40 bop 0 -58 a Fg(Appendix)10 b(K:)g(Tutorial2Server.java)1282
b(40)419 183 y Fh(//taken)24 b(from)h(the)f(first)h(argument\))419
233 y(serverId)f(=)h(argv[0];)419 283 y(trueServer)f(=)h
(xerox.ilu.IluServer.createServer\(s)o(erverId\);)319
333 y(})g(catch)g(\(org.omg.CORBA.SystemException)d(e\))i({)419
382 y(System.err.println\("Failed)e(creating)j(server:)f(")h(+)f(e\);)
419 432 y(System.exit\(1\);)319 482 y(})319 532 y
(System.out.println\("Create)f(the)h(factory"\);)319
582 y(try)h({)419 632 y(//Now)f(create)h(an)f(instance)h(of)f(a)h
(Factory)f(object)h(on)f(the)h(server)419 681 y(//with)f(an)h(instance)
f(handle)g("theFactory")419 731 y(factory)g(=)h(new)g
(Factory2Impl\(\);)419 781 y(Tutorial2.FactoryStub.registerTrueObj)o
(ect\()519 831 y("theFactory",)519 881 y(factory,)519
930 y(trueServer)519 980 y(\);)419 1030 y(//Make)f(the)h(factory)f
(well)h(known)f(by)h(publishing)f(it)419 1080 y
(xerox.ilu.IluSimpleBinding.publish\(fa)o(ctory\);)319
1130 y(})h(catch)g(\(org.omg.CORBA.SystemException)d(e\))i({)419
1180 y(System.err.println\("Failed)e(creating)j(Factory:)f(")g(+)h
(e\);)419 1229 y(System.exit\(1\);)319 1279 y(})319 1329
y(//Now)g(we)f(print)h(the)f(string)h(binding)f(handle)g(\(the)h
(object's)f(name)319 1379 y(//plus)h(its)f(location\))g(of)h(the)g(new)
f(Factory)h(instance)319 1429 y(System.out.println\("Factory)e
(instance)h(published"\);)319 1478 y(System.out.println\("Its)f(SBH)i
(is)f('")h(+)g(xerox.ilu.Ilu.sbhOfObject\(factory\))120
1528 y(+)g("'"\);)319 1578 y(//the)g(program)f(doesn't)g(terminate)g
(because)h(the)f(server)g(is)h(still)g(alive...)220 1628
y(})f(//main)120 1727 y(})h(//Tutorial2Server)p eop
%%Page: 41 42
41 41 bop 0 -58 a Fg(Appendix)10 b(L:)g(simple4.java)1431
b(41)0 183 y Fb(Appendix)14 b(L)36 b(simple4.java)120
428 y Fh(/*)145 478 y(*)25 b(A)g(simple)f(client)g(program)g(that)h
(finds)f(the)h(TapeCalculator-Factory,)145 528 y(*)g(creates)f(a)h
(calculator)f(and)g(executes)h(the)f(users)h(input.)145
578 y(*/)120 677 y(/*)145 727 y(*)g(Run)f(this)h(like)145
777 y(*)g(java)f(Tutorial2.simple4)g(serverId)145 827
y(*/)120 927 y(package)g(Tutorial2;)120 1026 y(public)g(class)h
(simple4)f({)220 1126 y(/*)g(We)h(define)f(a)h(new)g(routine,)f
("Get_Tutorial_Calculator",)e(which)245 1176 y(*)i(finds)h(the)f
(tutorial)h(factory,)f(then)g(creates)h(a)f(new)h(TapeCalculator)245
1225 y(*)f(object)h(for)f(us.)245 1275 y(*/)220 1325
y(public)g(static)g(Tutorial2.TapeCalculator)220 1375
y(GetTutorialTapeCalculator\(String)e(serverId,)i(String)g(factoryId\))
g({)319 1425 y(Tutorial2.Factory)g(factory)g(=)h(null;)319
1474 y(Tutorial2.TapeCalculator)e(calc)h(=)h(null;)319
1524 y(System.out.println\("Looking)e(up)h(factory"\);)319
1574 y(try)h({)419 1624 y(/*)g(We)f(have)h(to)g(call)f(lookup)g(with)h
(the)g(object)f(ID)h(of)444 1674 y(*)g(the)f(factory)g(object,)h(and)f
(the)h(``type'')f(of)h(the)f(object)h(we're)f(looking)444
1724 y(*)h(for.)444 1773 y(*/)419 1823 y(factory)f(=)h
(\(Tutorial2.Factory\))817 1873 y(xerox.ilu.IluSimpleBinding.lookup\()
618 1923 y(serverId,)618 1973 y(factoryId,)618 2022 y
(Tutorial2.FactoryStub.iluClass\(\))618 2072 y(\);)319
2122 y(})g(catch)g(\(org.omg.CORBA.SystemException)d(e\))i({)419
2172 y(System.err.println\("Failed)e(to)j(get)g(factory:)f(")h(+)f
(e\);)419 2222 y(System.exit\(1\);)319 2271 y(})319 2321
y(if)h(\(factory==null\))e({)419 2371 y(System.err.println\("Got)g
(null)h(factory"\);)419 2421 y(System.exit\(1\);)319
2471 y(})319 2521 y(System.out.println\("Got)f(factory)h(")h(+)g
(factory\);)319 2570 y(System.out.println\("Looking)e(up)h
(TapeCalculator"\);)319 2620 y(try)h({)419 2670 y(calc)f(=)h
(factory.CreateTapeCalculator\(\);)p eop
%%Page: 42 43
42 42 bop 0 -58 a Fg(Appendix)10 b(L:)g(simple4.java)1431
b(42)319 183 y Fh(})25 b(catch)g(\(org.omg.CORBA.SystemException)d(e\))
i({)419 233 y(System.err.println\("Failed)e(to)j(get)g(TapeCalculator:)
e(")i(+)g(e\);)419 283 y(System.exit\(1\);)319 333 y(})319
382 y(if)g(\(calc==null\))f({)419 432 y(System.err.println\("Got)f
(null)h(TapeCalculator"\);)419 482 y(System.exit\(1\);)319
532 y(})319 582 y(System.out.println\("Got)f(TapeCalculator)h(")g(+)h
(calc\);)319 632 y(return)g(calc;)220 681 y(})f
(//GetTutorialTapeCalculator)220 831 y(static)g(String)g(opNames[])319
881 y(=)h({"SetValue",)f("Add",)g("Subtract",)g("Multiply",)g
("Divide"};)220 980 y(static)g(double)g(argToDouble\(String)g
(inputLine\))g({)319 1030 y(return)h
(Double.valueOf\(inputLine.substring)o(\(1\)\).doubl)o(eValue\(\);)220
1080 y(})f(//argToDouble)220 1229 y(public)g(static)g(void)h
(main\(String)f(argv[]\))g({)319 1279 y(Tutorial2.TapeCalculator)f
(calc;)319 1329 y(Tutorial2.Operation[])g(tape;)319 1379
y(boolean)i(quitFlag)f(=)g(false;)319 1429 y(double)h(value)f(=)h(0.0;)
319 1478 y(String)g(line;)319 1528 y(java.io.DataInputStream)e(sysIn)h
(=)419 1578 y(new)h(java.io.DataInputStream\(System.in)o(\);)319
1678 y(if)g(\(argv.length)f(<)h(1\))f({)419 1727 y
(System.err.println\("USAGE:)e(java)j(Tutorial2.simple4)e(serverid"\);)
419 1777 y(System.exit\(1\);)319 1827 y(})319 1877 y(//Find)i(a)f
(calculator)319 1927 y(String)h(serverId)f(=)h(argv[0];)319
1977 y(calc)g(=)g(GetTutorialTapeCalculator\(serverId)o(,)d
("theFactory"\);)319 2026 y(if)j(\(calc==null\))f({)419
2076 y(System.err.println\("Didn't)e(get)j(a)g(calculator"\);)419
2126 y(System.exit\(1\);)319 2176 y(})319 2226 y
(System.out.println\("Got)e(tape)i(calculator"\);)319
2275 y(try)g({)419 2325 y(//Clear)f(the)h(calculator)f(before)g(using)h
(it)419 2375 y(calc.SetValue\(0.0\);)419 2425 y(//Loop)f(over)h(user)f
(inputs)h(and)f(perform)h(the)f(requested)g(operation)419
2475 y(while)g(\(!quitFlag\))g({)519 2524 y(value)g(=)h
(calc.GetValue\(\);)519 2574 y(System.out.print\(value)d(+)j("\\n>)g
("\);)f(System.out.flush\(\);)519 2624 y(line)g(=)h
(sysIn.readLine\(\);)p eop
%%Page: 43 44
43 43 bop 0 -58 a Fg(Appendix)10 b(L:)g(simple4.java)1431
b(43)519 183 y Fh(if)24 b(\(line)h(==)f(null\))h(line)f(=)h("q";)519
233 y(switch)f(\(line.charAt\(0\)\))f({)618 283 y(case)i('\\n':)718
333 y(break;)618 382 y(case)g('+':)718 432 y(value)f(=)h
(argToDouble\(line\);)718 482 y(calc.Add\(value\);)718
532 y(break;)618 582 y(case)g('-':)718 632 y(value)f(=)h
(argToDouble\(line\);)718 681 y(calc.Subtract\(value\);)718
731 y(break;)618 781 y(case)g('*':)718 831 y(value)f(=)h
(argToDouble\(line\);)718 881 y(calc.Multiply\(value\);)718
930 y(break;)618 980 y(case)g('/':)718 1030 y(try)f({)817
1080 y(value)h(=)g(argToDouble\(line\);)817 1130 y
(calc.Divide\(value\);)718 1180 y(})g(catch)f(\(Tutorial.DivideByZero)f
(e\))i({)817 1229 y(System.out.println\("**)e(division)h(by)h(zero)g(")
f(+)h(e\);)718 1279 y(})718 1329 y(break;)618 1379 y(case)g('q':)718
1429 y(quitFlag)f(=)h(true;)718 1478 y(break;)618 1528
y(case)g('t':)718 1578 y(tape)f(=)h(calc.GetTape\(\);)718
1628 y(for)f(\(int)h(i)g(=)g(0;)f(i)h(<)50 b(tape.length;)24
b(i++\))g({)792 1678 y(System.out.println\(")48 b(")992
1727 y(+)25 b(opNames[tape[i].op.value\(\)])992 1777
y(+)g("\(")f(+)h(tape[i].value)f(+)g("\))h(=>)g(")992
1827 y(+)g(tape[i].accumulator)992 1877 y(\);)718 1927
y(})718 1977 y(break;)618 2026 y(case)g('c':)718 2076
y(calc.SetValue\(0.0\);)718 2126 y(break;)618 2176 y(default:)718
2226 y(System.out.println\("Invalid)d(Operation)i(<")h(+)g(line)f(+)120
2275 y(">"\);)718 2325 y(System.out.println\("Valid)e(ops)j(are)g(+,)f
(-,)h(*,)g(/,)f(")817 2375 y(+)h("t)g(\(for)f(tape\),")817
2425 y(+)h("c)g(\(for)f(clear\),")817 2475 y(+)h("q)g(\(for)f(quit\),")
817 2524 y(\);)519 2574 y(})419 2624 y(})p eop
%%Page: 44 45
44 44 bop 0 -58 a Fg(Appendix)10 b(L:)g(simple4.java)1431
b(44)319 183 y Fh(})25 b(catch)g(\(java.io.IOException)e(e\))h({)419
233 y(System.err.println\("Example)e(raised)j(IOException:)e(")i(+)g
(e\);)319 283 y(})g(catch)g(\(org.omg.CORBA.SystemException)d(e\))i({)
419 333 y(System.err.println\("Example)e(raised)j(CORBA)f
(SystemException:)f(")i(+)120 382 y(e\);)319 432 y(})220
482 y(})f(//main)120 582 y(})h(//simple4)p eop
%%Page: 45 46
45 45 bop 0 -58 a Fg(Appendix)10 b(M:)h(Tutorial.idl)1442
b(45)0 183 y Fb(Appendix)14 b(M)36 b(Tutorial.idl)120
370 y Fh(module)24 b(Tutorial)h({)170 470 y(exception)f(DivideByZero)g
({};)170 569 y(interface)g(Calculator)g({)220 669 y(//)g(Set)h(the)g
(value)f(of)h(the)f(calculator)g(to)h(`v')220 719 y(void)f(SetValue)g
(\(in)h(double)f(v\);)220 769 y(//)g(Return)h(the)f(value)h(of)f(the)h
(calculator)220 818 y(double)f(GetValue)g(\(\);)220 868
y(//)g(Adds)h(`v')g(to)f(the)h(calculator's)f(value)220
918 y(void)g(Add)h(\(in)f(double)h(v\);)220 968 y(//)f(Subtracts)g(`v')
h(from)g(the)f(calculator's)g(value)220 1018 y(void)g(Subtract)g(\(in)h
(double)f(v\);)220 1067 y(//)g(Multiplies)g(the)h(calculator's)f(value)
g(by)h(`v')220 1117 y(void)f(Multiply)g(\(in)h(double)f(v\);)220
1167 y(//)g(Divides)h(the)f(calculator's)g(value)g(by)h(`v')220
1217 y(void)f(Divide)h(\(in)f(double)g(v\))h(raises)g
(\(DivideByZero\);)170 1267 y(};)170 1366 y(interface)f(Factory)g({)220
1466 y(//)g(Create)h(and)f(return)h(an)f(instance)h(of)f(a)h
(Calculator)f(object)220 1516 y(Calculator)g(CreateCalculator\(\);)170
1566 y(};)120 1615 y(};)p eop
%%Page: 46 47
46 46 bop 0 -58 a Fg(Appendix)10 b(N:)g(Tutorial2.idl)1427
b(46)0 183 y Fb(Appendix)14 b(N)36 b(Tutorial2.idl)120
370 y Fh(#include)24 b("Tutorial.idl")120 470 y(module)g(Tutorial2)g({)
170 569 y(enum)g(OpType)h({)g(SetValue,)f(Add,)g(Subtract,)g(Multiply,)
g(Divide)h(};)170 669 y(struct)f(Operation)g({)220 719
y(OpType)g(op;)220 769 y(double)g(value;)220 818 y(double)g
(accumulator;)170 868 y(};)170 968 y(typedef)g(sequence<Operation>)f
(RegisterTape;)170 1067 y(//)i(A)f(four)h(function)f(calculator)g(with)
h(a)f(register)h(tape)170 1117 y(interface)f(TapeCalculator)f(:)i
(Tutorial::Calculator)e({)220 1217 y(RegisterTape)g(GetTape)i(\(\);)170
1267 y(};)170 1366 y(//)g(A)f(factory)h(that)f(produces)g
(TapeCalculators)170 1416 y(interface)g(Factory)g(:)h
(Tutorial::Factory)e({)220 1516 y(TapeCalculator)g
(CreateTapeCalculator)g(\(\);)170 1566 y(};)120 1615
y(};)p eop
%%Page: 47 48
47 47 bop 0 -58 a Fg(Index)11 b(of)g(Concepts)1571 b(47)0
183 y Fb(Index)15 b(of)f(Concepts)62 430 y Fa(\(Index)9
b(is)g(nonexistent\))p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
